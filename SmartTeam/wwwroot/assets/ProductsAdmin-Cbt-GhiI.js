import{l as ye,aq as je,m as Ne,r as a,aL as ge,aM as De,I as Pe,aN as Fe,aO as Se,aP as Ie,j as e,y as S,J as Me,aQ as Qe,aR as Le,c as de,u as ve,M as Ue,N as Ae,e as Oe,D as qe,aS as Ee,aT as Be,k as ze,o as Ge,aU as $e,a4 as ie,F as he,am as Re,X as me}from"./index-BBhEgxr5.js";import{M as fe}from"./Modal-GV133dSV.js";import{U as pe}from"./upload-BU2oQTXe.js";import{T as ue}from"./trash-2-B6-bQTRC.js";import{F as be}from"./file-text-48VxCMpM.js";import{L as le}from"./loader-circle-Bn7_-Q9n.js";import{D as He}from"./dollar-sign-DU11O5I5.js";import{C as xe}from"./chevron-down-5LTC5Sp0.js";import{E as Te}from"./eye-D9ml9ts3.js";import{P as Ke}from"./pen-D6mcFLHB.js";import{T as _e}from"./trash-B6bYLvKL.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ze=ye("palette",Je);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Xe=ye("ruler",We),Ye=({setOpen:m})=>{const{data:y,error:o,isRolesLoading:L,refetch:U}=je(),{data:h,isLoading:z,errorC:u}=Ne(),[H,I]=a.useState([]);a.useEffect(()=>{h&&I([...h].sort((r,n)=>r.name.localeCompare(n.name)))},[h]);const{data:G,isLoading:A}=ge(),{data:_,isLoading:ae}=De("1cd62de1-35cd-4d90-b767-dc1a443bdb3f"),{data:V}=Pe(),[O,{isLoading:v}]=Fe(),[q,{isLoading:J}]=Se(),[ee,{isLoading:E}]=Ie(),[d,C]=a.useState({name:"",description:"",shortDescription:"",sku:"",isActive:!0,isHotDeal:!1,stockQuantity:0,categoryId:"",brandId:"",price:0,discountedPrice:0,minimumOrderQuantity:0,detailImageUrls:[]}),[D,se]=a.useState(null),[f,c]=a.useState([]),[g,j]=a.useState(null),[N,T]=a.useState(""),[K,Z]=a.useState(""),[$,W]=a.useState(null),[R,X]=a.useState([]);a.useEffect(()=>{if(D){const r=URL.createObjectURL(D);return W(r),()=>{URL.revokeObjectURL(r)}}else W(null)},[D]),a.useEffect(()=>{if(f&&f.length>0){const r=Array.from(f).map(n=>URL.createObjectURL(n));return X(r),()=>{r.forEach(n=>URL.revokeObjectURL(n))}}else X([])},[f]);const Y=r=>{const n=r.target.files[0];n&&(se(n),r.target.value="")},i=r=>{const n=Array.from(r.target.files);!n||n.length===0||(c(P=>[...P,...n]),r.target.value="")},t=r=>{const n=r.target.files[0];if(n){if(n.type!=="application/pdf"){S.error("Zəhmət olmasa yalnız PDF faylları yükləyin");return}j(n),r.target.value=""}},x=r=>{c(n=>n.filter((P,w)=>w!==r))},p=()=>{j(null),T(""),Z("")},M=()=>{C({name:"",description:"",shortDescription:"",sku:"",isHotDeal:!1,stockQuantity:0,categoryId:"",brandId:"",price:0,discountedPrice:0,minimumOrderQuantity:0}),se(null),c([]),j(null),T(""),Z(""),m(!1)},B=async r=>{if(r.preventDefault(),!D){S.error("Zəhmət olmasa əvvəlcə şəkil yükləyin");return}try{const n=new FormData,P={name:d.name,description:d.description,shortDescription:d.shortDescription,sku:d.sku,isActive:d.isActive,isHotDeal:d.isHotDeal,stockQuantity:d.stockQuantity,categoryId:d.categoryId,brandId:d.brandId,price:Number(d.price),discountedPrice:Number(d.discountedPrice),minimumOrderQuantity:d.minimumOrderQuantity,detailImageUrls:[]};n.append("productData",JSON.stringify(P)),n.append("imageFile",D,D.name);const w=await O(n).unwrap();if(f.length>0){const F=new FormData;f.forEach(re=>{F.append("imageFiles",re,re.name)});const te=await q({id:w.id,images:F}).unwrap()}if(g){const F=new FormData;F.append("ProductId",w.id),F.append("PdfFile",g,g.name),K&&F.append("CustomFileName",K),N&&F.append("Description",N),F.append("IsActive","true"),await ee({productId:w.id,formData:F}).unwrap()}S.success("Məhsul uğurla əlavə edildi"),M()}catch(n){S.error(n?.data||n?.message||"Nəsə səhv getdi")}},k=r=>{const{name:n,value:P,type:w,checked:F}=r.target;C(te=>({...te,[n]:w==="checkbox"?F:n==="stockQuantity"||n==="minimumOrderQuantity"?Number(P):P}))},ne=r=>{const{name:n,value:P}=r.target;C(w=>({...w,[n]:P}))};return e.jsxs("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto dark-scrollbar",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold !text-white",children:"Yeni məhsul əlavə et"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul adı *"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:k,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul adını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU *"}),e.jsx("input",{type:"text",name:"sku",value:d.sku,onChange:k,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"SKU daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stok miqdarı *"}),e.jsx("input",{type:"number",name:"stockQuantity",value:d.stockQuantity===0?"":d.stockQuantity,onChange:k,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum sifariş miqdarı *"}),e.jsx("input",{type:"number",name:"minimumOrderQuantity",value:d.minimumOrderQuantity===0?"":d.minimumOrderQuantity,onChange:k,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kateqoriya *"}),e.jsxs("select",{name:"categoryId",value:d.categoryId,onChange:k,required:!0,className:"w-full px-3 py-2 dark-scrollbar bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Kateqoriya seçin"}),H?.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Brend *"}),e.jsxs("select",{name:"brandId",value:d.brandId,onChange:k,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Brend seçin"}),G?.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isHotDeal",name:"isHotDeal",checked:d.isHotDeal,onChange:k,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isHotDeal",className:"text-sm font-medium",children:"Xüsusi təklif kimi işarələ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:d.isActive,onChange:k,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Aktiv"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Açıqlama"}),e.jsx("textarea",{name:"description",value:d.description,onChange:k,rows:"4",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul açıqlamasını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qısa açıqlama"}),e.jsx("textarea",{name:"shortDescription",value:d.shortDescription,onChange:k,rows:"2",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Qısa açıqlama daxil edin"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-[#2c2c2c] rounded-md border border-gray-600",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qiymət"}),e.jsx("input",{type:"number",name:"price",value:d.price,onChange:ne,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Endirimli qiymət"}),e.jsx("input",{type:"number",name:"discountedPrice",value:d.discountedPrice,onChange:ne,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul şəkilləri"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Y,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx(pe,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"Şəkil yükləmək üçün klik edin və ya sürükləyin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB each"})]})]}),D&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:$,alt:"Product preview",className:"w-full h-24 object-cover rounded-md border "}),e.jsx("button",{type:"button",onClick:()=>{se(null)},className:"absolute top-1 right-1 bg-red-600 hover:bg-red-700 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ue,{className:"w-3 h-3"})})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ətraflı şəkillər"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:i,className:"hidden",id:"detail-image-upload"}),e.jsxs("label",{htmlFor:"detail-image-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx(pe,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"Şəkil yükləmək üçün klik edin və ya sürükləyin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB each"})]})]}),f.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:f.map((r,n)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:R[n],alt:`Detail preview ${n+1}`,className:"w-full h-24 object-cover rounded-md border "}),e.jsx("button",{type:"button",onClick:()=>x(n),className:"absolute top-1 right-1 bg-red-600 hover:bg-red-700 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ue,{className:"w-3 h-3"})})]},n))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul spesifikasiyası (PDF)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"application/pdf",onChange:t,className:"hidden",id:"pdf-upload"}),e.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx(be,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"PDF spesifikasiya yükləmək üçün klik edin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PDF up to 10MB"})]})]}),g&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-[#2c2c2c] rounded-md",children:[e.jsx(be,{className:"w-8 h-8 text-indigo-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:g.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[(g.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",onClick:p,className:"bg-red-600 hover:bg-red-700 text-white rounded-full p-2",children:e.jsx(ue,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Xüsusi fayl adı (İxtiyari)"}),e.jsx("input",{type:"text",value:K,onChange:r=>Z(r.target.value),className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"PDF üçün xüsusi ad daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"PDF açıqlaması (İxtiyari)"}),e.jsx("textarea",{value:N,onChange:r=>T(r.target.value),rows:"2",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"PDF üçün açıqlama daxil edin"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>M(),className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold",disabled:v||J||E,children:"Ləğv et"}),e.jsx("button",{type:"button",onClick:B,disabled:v||J||E,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:v||J||E?"Əlavə edilir...":"Məhsul əlavə et"})]})]})]})},Ve=({setOpen:m,idPr:y})=>{const{data:o,isLoading:L}=Me(y,{skip:!y}),[U,{isLoading:h}]=Qe(),[z]=Le(),{data:u}=Ne(),[H,I]=a.useState([]);a.useEffect(()=>{u&&I([...u].sort((i,t)=>i.name.localeCompare(t.name)))},[u]);const{data:G}=ge(),{data:A}=je(),[_,ae]=a.useState(null),[V,O]=a.useState(null),[v,q]=a.useState(null),[J,ee]=a.useState(!1),[E,d]=a.useState([]),[C,D]=a.useState([]),[se,f]=a.useState([]),[c,g]=a.useState({name:"",description:"",shortDescription:"",sku:"",isActive:!0,isHotDeal:!1,stockQuantity:0,categoryId:"",brandId:"",price:0,discountedPrice:0,minimumOrderQuantity:0});a.useEffect(()=>{o&&o.id&&(g({name:o.name||"",description:o.description||"",shortDescription:o.shortDescription||"",sku:o.sku||"",isActive:!!o.isActive,isHotDeal:!!o.isHotDeal,stockQuantity:o.stockQuantity||0,categoryId:o.categoryId||"",brandId:o.brandId||"",price:o.price||0,discountedPrice:o.discountedPrice||0,minimumOrderQuantity:o.minimumOrderQuantity||0}),o.imageUrl&&O(o.imageUrl),o.images&&o.images.length>0&&d(o.images))},[o]);const j=i=>{const{name:t,value:x,type:p,checked:M}=i.target;g(B=>({...B,[t]:p==="checkbox"?M:t==="stockQuantity"||t==="minimumOrderQuantity"?Number(x):x}))},N=i=>{const{name:t,value:x}=i.target;g(p=>({...p,[t]:x}))},T=i=>{const t=i.target.files[0];if(t){if(!t.type.startsWith("image/")){S.error("Zəhmət olmasa düzgün şəkil faylı seçin");return}if(t.size>5*1024*1024){S.error("Şəkil ölçüsü 5MB-dan az olmalıdır");return}ae(t),O(URL.createObjectURL(t))}},K=()=>{ae(null),O(o?.imageUrl||null)},Z=i=>{const t=i.target.files[0];if(t){if(t.type!=="application/pdf"){S.error("Zəhmət olmasa düzgün PDF faylı seçin");return}if(t.size>10*1024*1024){S.error("PDF ölçüsü 10MB-dan az olmalıdır");return}q(t),ee(!0)}},$=()=>{q(null),ee(!1)},W=i=>{const t=Array.from(i.target.files),x=[];for(const p of t){if(!p.type.startsWith("image/")){S.error(`${p.name} düzgün şəkil faylı deyil`);continue}if(p.size>5*1024*1024){S.error(`${p.name} 5MB-dan böyükdür`);continue}x.push(p)}x.length>0&&D(p=>[...p,...x])},R=i=>{const t=E[i];f(x=>[...x,t]),d(x=>x.filter((p,M)=>M!==i))},X=i=>{D(t=>t.filter((x,p)=>p!==i))},Y=async i=>{i.preventDefault();try{const t={name:c.name,description:c.description,shortDescription:c.shortDescription,sku:c.sku,isActive:c.isActive,isHotDeal:c.isHotDeal,stockQuantity:c.stockQuantity,categoryId:c.categoryId,brandId:c.brandId,price:Number(c.price),discountedPrice:Number(c.discountedPrice),minimumOrderQuantity:c.minimumOrderQuantity,detailImageUrls:E.map(M=>M.imageUrl)},x=new FormData;x.append("productData",JSON.stringify(t)),_&&x.append("imageFile",_),J&&v&&x.append("pdfFile",v),C.length>0&&C.forEach(M=>{x.append("detailImageFiles",M)});const p=await U({id:y,formData:x}).unwrap();ae(null),q(null),ee(!1),D([]),f([]),S.success("Məhsul uğurla yeniləndi"),m()}catch(t){console.error("Edit error:",t)}};return L?e.jsx("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-4xl w-full flex items-center justify-center",children:e.jsx("p",{children:"Məhsul yüklənir..."})}):e.jsxs("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto dark-scrollbar",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold !text-white",children:"Məhsulu redaktə et"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul şəkli"}),e.jsxs("div",{className:"flex items-center gap-4",children:[V?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:_?V:`${de}/${V}`,alt:"Product preview",className:"w-32 h-32 object-cover rounded-md border border-gray-600",onError:i=>{i.target.src="/Icons/logo.png"}}),e.jsx("button",{type:"button",onClick:K,className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center",children:"×"})]}):e.jsx("div",{className:"w-32 h-32 bg-[#2c2c2c] border-2 border-dashed border-gray-600 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Şəkil yoxdur"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"imageFile",accept:"image/*",onChange:T,className:"hidden"}),e.jsx("label",{htmlFor:"imageFile",className:"inline-block px-4 py-2 bg-[#2c2c2c] hover:bg-[#3c3c3c] border border-gray-600 rounded-md cursor-pointer transition-colors",children:_?"Şəkli dəyişdir":"Şəkil yüklə"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Dəstəklənir: JPG, PNG, GIF (maksimum 5MB)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul PDF"}),e.jsxs("div",{className:"flex items-center gap-4",children:[o?.pdfUrl&&!v&&e.jsx("a",{href:`${de}/${o.pdfUrl}`,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 text-sm underline",children:"Hazırkı PDF-ə bax"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"pdfFile",accept:"application/pdf",onChange:Z,className:"hidden"}),e.jsx("label",{htmlFor:"pdfFile",className:"inline-block px-4 py-2 bg-[#2c2c2c] hover:bg-[#3c3c3c] border border-gray-600 rounded-md cursor-pointer transition-colors",children:v?`Seçildi: ${v.name}`:o?.pdfUrl?"PDF-i dəyişdir":"PDF yüklə"}),v&&e.jsx("button",{type:"button",onClick:$,className:"ml-2 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-md text-sm",children:"Sil"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Dəstəklənir: PDF (maksimum 10MB)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ətraflı şəkillər"}),E.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Hazırkı şəkillər"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:E.map((i,t)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`${de}/${i.imageUrl}`,alt:`Detail ${t+1}`,className:"w-full h-32 object-cover rounded-md border border-gray-600",onError:x=>{x.target.src="/Icons/logo.png"}}),e.jsx("button",{type:"button",onClick:()=>R(t),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center",children:"×"})]},i.id))})]}),C.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Yeni şəkillər (yüklənəcək)"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:C.map((i,t)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(i),alt:`New ${t+1}`,className:"w-full h-32 object-cover rounded-md border border-gray-600"}),e.jsx("button",{type:"button",onClick:()=>X(t),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center",children:"×"})]},t))})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"galleryImages",accept:"image/*",multiple:!0,onChange:W,className:"hidden"}),e.jsx("label",{htmlFor:"galleryImages",className:"inline-block px-4 py-2 bg-[#2c2c2c] hover:bg-[#3c3c3c] border border-gray-600 rounded-md cursor-pointer transition-colors",children:"Ətraflı şəkillər əlavə et"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Bir neçə şəkil seçin. JPG, PNG, GIF (hər biri maksimum 5MB)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul adı *"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:j,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul adını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU"}),e.jsx("input",{type:"text",name:"sku",value:c.sku,onChange:j,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"SKU daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kateqoriya *"}),e.jsxs("select",{name:"categoryId",value:c.categoryId,onChange:j,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Kateqoriya seçin"}),H?.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Brend *"}),e.jsxs("select",{name:"brandId",value:c.brandId,onChange:j,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Brend seçin"}),G?.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stok miqdarı *"}),e.jsx("input",{type:"number",name:"stockQuantity",value:c.stockQuantity,onChange:j,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum sifariş miqdarı *"}),e.jsx("input",{type:"number",name:"minimumOrderQuantity",value:c.minimumOrderQuantity,onChange:j,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isHotDeal",name:"isHotDeal",checked:c.isHotDeal,onChange:j,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isHotDeal",className:"text-sm font-medium",children:"Xüsusi təklif kimi işarələ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:c.isActive,onChange:j,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Aktiv"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Açıqlama"}),e.jsx("textarea",{name:"description",value:c.description,onChange:j,rows:"4",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul açıqlamasını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qısa açıqlama"}),e.jsx("textarea",{name:"shortDescription",value:c.shortDescription,onChange:j,rows:"2",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Qısa açıqlama daxil edin"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-[#2c2c2c] rounded-md border border-gray-600",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qiymət"}),e.jsx("input",{type:"number",name:"price",value:c.price,onChange:N,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Endirimli qiymət"}),e.jsx("input",{type:"number",name:"discountedPrice",value:c.discountedPrice,onChange:N,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors",children:"Ləğv et"}),e.jsx("button",{type:"button",onClick:Y,disabled:h,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Yenilənir...":"Məhsulu yenilə"})]})]})]})};function es({currentPage:m,totalPages:y,onPageChange:o}){const{t:L}=ve(),U=()=>{const u=[];if(y<=5)for(let I=1;I<=y;I++)u.push(I);else{u.push(1);let I=Math.max(2,m-1),G=Math.min(y-1,m+1);m<=3&&(G=4),m>=y-2&&(I=y-3),I>2&&u.push("...");for(let A=I;A<=G;A++)u.push(A);G<y-1&&u.push("..."),u.push(y)}return u},h=()=>{m>1&&o(m-1)},z=()=>{m<y&&o(m+1)};return y<=1?null:e.jsx("nav",{className:"flex items-center justify-center mt-12 mb-8","aria-label":L("pagination.navigation"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:h,disabled:m===1,className:`w-10 h-10 rounded-full flex justify-center items-center transition-all duration-300
            ${m===1?"text-gray-300 cursor-not-allowed":"text-[#197853] hover:text-white hover:bg-[#197853] cursor-pointer"}`,"aria-label":L("pagination.previousPage"),children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center gap-1",children:U().map((u,H)=>u==="..."?e.jsx("span",{className:"w-10 h-10 flex items-center justify-center text-[#197853]/50 font-sans",children:"..."},`ellipsis-${H}`):e.jsx("button",{onClick:()=>o(u),disabled:m===u,className:`w-10 h-10 rounded-full text-sm font-sans font-semibold transition-all duration-300
                  ${m===u?"bg-[#197853] text-white shadow-md shadow-[#197853]/20 transform scale-110":"text-[#197853] hover:text-[#0A4A30] hover:bg-[#197853]/5 cursor-pointer"}`,"aria-label":`${L("pagination.page")} ${u}`,"aria-current":m===u?"page":void 0,children:u},u))}),e.jsx("button",{onClick:z,disabled:m===y,className:`w-10 h-10 rounded-full flex justify-center items-center transition-all duration-300
            ${m===y?"text-gray-300 cursor-not-allowed":"text-[#197853] hover:text-white hover:bg-[#197853] cursor-pointer"}`,"aria-label":L("pagination.nextPage"),children:e.jsx(Ae,{className:"w-5 h-5"})})]})})}const us=()=>{const{t:m}=ve(),y=Oe(),[o,L]=a.useState(1),[U]=a.useState(12),[h,z]=a.useState(null),{data:u,isLoading:H,error:I,refetch:G}=qe({page:o,pageSize:U},{skip:!!h}),{data:A,isLoading:_,error:ae}=Ee({status:h,page:o,pageSize:U},{skip:h===null}),V=H||_,{data:O,isSummaryLoading:v}=Be(),{data:q,isLoading:J}=ze(),[ee,E]=a.useState(!1),[d,C]=a.useState(null),[D,se]=a.useState(null),[f,c]=a.useState(""),[g,j]=a.useState([]),[N,T]=a.useState([]),[K,Z]=a.useState({}),[$,W]=a.useState(!1),[R,X]=a.useState(!1),Y=a.useRef(null),i=a.useRef(null),{data:t,isLoading:x}=ge(),[p,{isLoading:M}]=Ge(),[B,k]=a.useState(null),[ne]=$e(),r=a.useMemo(()=>f.length>0||g.length>0||N.length>0,[f,g,N]);a.useEffect(()=>{L(1)},[f,g,N,h]),a.useEffect(()=>{const s=setTimeout(async()=>{if(r){z(null);const l=g.length>0?g[0]:null;let b=null;if(N.length>0&&t){const Q=t.find(Ce=>Ce.id===N[0]);Q&&(b=Q.slug),!b&&Q&&Q.name&&(b=Q.name.toLowerCase())}const oe={categoryId:l,brandSlug:b,searchTerm:f||null,page:o,pageSize:U,minPrice:null,maxPrice:null,isHotDeal:null,isRecommended:null,filterCriteria:[]};try{const Q=await p(oe).unwrap();k(Q)}catch(Q){console.error("Filtering failed",Q),k({products:[],totalCount:0})}}else k(null)},500);return()=>{clearTimeout(s)}},[r,o,U,f,g,N,t,p]);const n=async s=>{try{await ne({id:s}).unwrap(),S.success(m("admin.productDeletedSuccess")),w()}catch(l){S.error(l?.data||m("admin.deletingProductFailed"))}},P=s=>{y(`/admin/products/${s.id}`)},w=()=>{C(!1),E(!1),G()};a.useEffect(()=>{const s=l=>{Y.current&&!Y.current.contains(l.target)&&W(!1)};return $&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[$]),a.useEffect(()=>{const s=l=>{i.current&&!i.current.contains(l.target)&&X(!1)};return R&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[R]);const F=s=>{Z(l=>({...l,[s]:!l[s]}))},te=s=>{j(l=>l.includes(s)?l.filter(b=>b!==s):[...l,s])},re=s=>{T(l=>l.includes(s)?l.filter(b=>b!==s):[...l,s])},ce=a.useMemo(()=>h!==null?A?.items||[]:r&&B?B.products||[]:u?.items||[],[h,A,r,B,u]),we=a.useMemo(()=>h!==null?A?.totalCount||0:r&&B?B.totalCount||0:u?.totalCount||0,[h,A,r,B,u]),ke=Math.ceil(we/U);return e.jsxs("div",{className:"text-white p-4 min-h-screen",children:[e.jsx(fe,{open:d==="add",setOpen:w,children:e.jsx(Ye,{setOpen:w})}),e.jsx(fe,{open:d==="edit",setOpen:w,children:e.jsx(Ve,{setOpen:w,idPr:D})}),e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-bold !text-white mb-2",children:m("admin.products")}),e.jsx("p",{className:"text-gray-400",children:m("admin.manageProducts")})]}),e.jsx("button",{onClick:()=>C("add"),className:"md:px-6 md:py-3 px-4 py-2 bg-white text-sm md:text-base transition-all duration-300 rounded-lg font-semibold text-gray-900 shadow-lg transform hover:bg-gray-100 hover:scale-105",children:m("admin.addNewProduct")})]}),V?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(le,{className:"w-12 h-12 animate-spin text-indigo-500"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{onClick:()=>z(null),className:`bg-gradient-to-r from-blue-600 to-blue-700 p-6 rounded-xl shadow-lg cursor-pointer transition-transform hover:scale-105 ${h===null?"ring-4 ring-blue-300 ring-offset-2 ring-offset-[#111]":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Ümumi məhsullar"}),v?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(le,{className:"w-6 h-6 animate-spin text-blue-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:O?.totalProducts||0})]}),e.jsx(ie,{className:"w-8 h-8 text-blue-200"})]})}),e.jsx("div",{onClick:()=>z(1),className:`bg-gradient-to-r from-green-600 to-green-700 p-6 rounded-xl shadow-lg cursor-pointer transition-transform hover:scale-105 ${h===1?"ring-4 ring-green-300 ring-offset-2 ring-offset-[#111]":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Anbarda var"}),v?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(le,{className:"w-6 h-6 animate-spin text-green-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:O?.inStockProducts||0})]}),e.jsx(He,{className:"w-8 h-8 text-green-200"})]})}),e.jsx("div",{onClick:()=>z(2),className:`bg-gradient-to-r from-orange-600 to-orange-700 p-6 rounded-xl shadow-lg cursor-pointer transition-transform hover:scale-105 ${h===2?"ring-4 ring-orange-300 ring-offset-2 ring-offset-[#111]":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm",children:"Az qalıb"}),v?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(le,{className:"w-6 h-6 animate-spin text-orange-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:O?.lowStockProducts||0})]}),e.jsx(ie,{className:"w-8 h-8 text-orange-200"})]})}),e.jsx("div",{onClick:()=>z(3),className:`bg-gradient-to-r from-red-600 to-red-700 p-6 rounded-xl shadow-lg cursor-pointer transition-transform hover:scale-105 ${h===3?"ring-4 ring-red-300 ring-offset-2 ring-offset-[#111]":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm",children:"Anbarda yoxdur"}),v?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(le,{className:"w-6 h-6 animate-spin text-red-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:O?.outOfStockProducts||0})]}),e.jsx(ie,{className:"w-8 h-8 text-red-200"})]})})]}),e.jsxs("div",{className:"flex flex-col  mb-9",children:[e.jsxs("div",{className:"mb-3 flex flex-col md:flex-row gap-4 items-start md:items-center",children:[e.jsx("div",{className:"w-full md:w-auto",ref:Y,children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>W(!$),className:"flex items-center gap-2 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white hover:bg-gray-700 transition-all",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Kateqoriya"}),e.jsx(xe,{className:`w-4 h-4 transition-transform duration-200 ${$?"transform rotate-180":""}`})]}),$&&!J&&q&&q.length>0&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 min-w-[280px] max-h-[500px] overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-2",children:[q.map(s=>e.jsxs("div",{className:"border-b border-gray-700 last:border-b-0 pb-2 last:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-gray-700 rounded-lg transition-colors group",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-500 cursor-pointer border-gray-600 rounded focus:ring-blue-500 bg-gray-700",checked:g.includes(s.id),onChange:()=>te(s.id)}),e.jsx("span",{className:"font-medium text-sm text-white",children:s.name})]}),e.jsx("button",{onClick:()=>F(s.id),className:"p-1 hover:bg-gray-600 rounded transition-colors",children:e.jsx(xe,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${K[s.id]?"transform rotate-180":""}`})})]}),K[s.id]&&s.subCategories&&s.subCategories.length>0&&e.jsx("div",{className:"mt-2 ml-6 space-y-1 border-l border-gray-700 pl-2",children:s.subCategories.map(l=>e.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-500 cursor-pointer border-gray-600 rounded focus:ring-blue-500 bg-gray-700",checked:g.includes(l.id),onChange:()=>te(l.id)}),e.jsx("span",{children:l.name})]},l.id))})]},s.id)),g.length>0&&e.jsx("button",{onClick:()=>j([]),className:"w-full mt-3 px-4 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-gray-700 rounded-lg transition-colors",children:"Filtrləri təmizlə"})]})})]})}),e.jsx("div",{className:"w-full md:w-auto",ref:i,children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>X(!R),className:"flex items-center gap-2 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white hover:bg-gray-700 transition-all",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Brend"}),e.jsx(xe,{className:`w-4 h-4 transition-transform duration-200 ${R?"transform rotate-180":""}`})]}),R&&!x&&t&&t.length>0&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 min-w-[200px] max-h-[400px] overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-2",children:[t.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-500 cursor-pointer border-gray-600 rounded focus:ring-blue-500 bg-gray-700",checked:N.includes(s.id),onChange:()=>re(s.id)}),e.jsx("span",{children:s.name})]},s.id)),N.length>0&&e.jsx("button",{onClick:()=>T([]),className:"w-full mt-3 px-4 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-gray-700 rounded-lg transition-colors",children:"Brendləri təmizlə"})]})})]})}),e.jsx("div",{className:"flex-1 md:ml-auto md:max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Məhsul axtar...",value:f,onChange:s=>c(s.target.value),className:"w-full pl-12 pr-12 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),f&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:e.jsx(me,{className:"w-5 h-5"})})]})})]}),(g.length>0||N.length>0)&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[g.map(s=>{let l="";return q?.forEach(b=>{if(b.id===s)l=b.name;else if(b.subCategories){const oe=b.subCategories.find(Q=>Q.id===s);oe&&(l=oe.name)}}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white text-xs rounded-full",children:["Kateqoriya: ",l,e.jsx("button",{onClick:()=>te(s),className:"hover:text-red-300 transition-colors",children:e.jsx(me,{className:"w-3 h-3"})})]},s)}),N.map(s=>{const l=t?.find(b=>b.id===s);return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-600 text-white text-xs rounded-full",children:["Brend: ",l?.name,e.jsx("button",{onClick:()=>re(s),className:"hover:text-red-300 transition-colors",children:e.jsx(me,{className:"w-3 h-3"})})]},s)})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ce?.map(s=>e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"relative h-48 bg-gray-700",children:[e.jsx("img",{className:"w-full h-full object-contain bg-white cursor-pointer",src:`${de}/${s.primaryImageUrl}`,alt:s.name,onClick:()=>P(s),onError:l=>{l.target.src="/Icons/logo.png"}}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[e.jsx("button",{onClick:()=>P(s),className:"bg-green-600 hover:bg-green-700 p-2 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",title:"Məhsula bax",children:e.jsx(Te,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),C("edit"),se(s.id)},className:"bg-blue-600 hover:bg-blue-700 p-2 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",title:"Məhsulu redaktə et",children:e.jsx(Ke,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),n(s.id)},className:"bg-red-600 hover:bg-red-700 p-2 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",title:"Məhsulu sil",children:e.jsx(_e,{className:"w-4 h-4 text-white"})})]}),e.jsx("div",{className:"absolute top-3 left-3",children:s.stockQuantity===0?e.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Anbarda yoxdur"}):s.stockQuantity<=10?e.jsx("span",{className:"bg-orange-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Anbarda azdır"}):e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Anbarda var"})})]}),e.jsxs("div",{className:"p-5 cursor-pointer",onClick:()=>P(s),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold !text-white mb-1 truncate hover:text-blue-400 transition-colors",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm truncate",children:s.slug})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"text-2xl font-bold text-green-400",children:[s.discountedPrice>0?s.discountedPrice:s.price," AZN"]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(ie,{className:"w-4 h-4"}),"Stok"]}),e.jsx("span",{className:"text-white font-medium",children:s.stockQuantity})]}),s.colors&&s.colors.length>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Rənglər"]}),e.jsx("span",{className:"text-white font-medium",children:s.colors.length})]}),s.sizes&&s.sizes.length>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Ölçülər"]}),e.jsx("span",{className:"text-white font-medium",children:s.sizes.length})]})]}),s.colors&&s.colors.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Mövcud rənglər:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.colors.slice(0,4).map((l,b)=>e.jsx("span",{className:"bg-gray-700 text-gray-300 px-2 py-1 rounded text-xs",children:l},b)),s.colors.length>4&&e.jsxs("span",{className:"text-gray-400 text-xs self-center",children:["+",s.colors.length-4," daha çox"]})]})]}),s.sizes&&s.sizes.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Mövcud ölçülər:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.sizes.slice(0,4).map((l,b)=>e.jsx("span",{className:"bg-gray-700 text-gray-300 px-2 py-1 rounded text-xs",children:l},b)),s.sizes.length>4&&e.jsxs("span",{className:"text-gray-400 text-xs self-center",children:["+",s.sizes.length-4," daha çox"]})]})]})]})]},s.id))}),ce&&ce.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx(ie,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),f?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"Heç bir nəticə tapılmadı"}),e.jsxs("p",{className:"text-gray-500 mb-6",children:['"',f,'" üçün məhsul tapılmadı']}),e.jsx("button",{onClick:()=>c(""),className:"px-6 py-3 bg-gray-700 transition rounded-lg font-semibold text-white hover:bg-gray-600",children:"Axtarışı təmizlə"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"Heç bir məhsul tapılmadı"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"İlk məhsulunu əlavə etməklə başla"}),e.jsx("button",{onClick:()=>C("add"),className:"px-6 py-3 bg-white transition rounded-lg font-semibold text-gray-900 hover:bg-gray-100",children:"Məhsul əlavə et"})]})]}),e.jsx(es,{currentPage:o,totalPages:ke,onPageChange:s=>{L(s),window.scrollTo({top:0,behavior:"smooth"})}})]})]})]})};export{us as default};
