import{u as v,r as d,s as k,e as z,ab as C,y as i,j as e}from"./index-DXStjdCc.js";import{E as u}from"./eye-Ca6khng2.js";import{E as x}from"./eye-off-BehpjZ9F.js";import{L as p}from"./loader-circle-Do0avO8G.js";const W=()=>{const{t:s}=v(),[r,b]=d.useState({newPassword:"",confirmNewPassword:""}),[f,g]=d.useState(window.innerWidth>=768),[a,P]=d.useState({newPassword:!1,confirmPassword:!1}),[y]=k(),l=y.get("token"),n=z(),[j,{isLoading:c}]=C();d.useEffect(()=>{const t=()=>{g(window.innerWidth>=768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),d.useEffect(()=>{l||(i.error(s("resetPassword.invalidToken")),n("/forgot-password"))},[l,n,s]);const m=t=>{P(o=>({...o,[t]:!o[t]}))},w=t=>{const{name:o,value:N}=t.target;b({...r,[o]:N})},h=async t=>{if(t.preventDefault(),r.newPassword!==r.confirmNewPassword){i.error(s("resetPassword.passwordsMismatch"));return}if(r.newPassword.length<8){i.error(s("resetPassword.passwordLength"));return}try{await j({token:l,newPassword:r.newPassword,confirmNewPassword:r.confirmNewPassword}).unwrap(),i.success(s("resetPassword.resetSuccess")),setTimeout(()=>{n("/login")},2e3)}catch(o){console.error("Reset password failed:",o),o?.status===400?i.error(o?.data?.message||s("resetPassword.invalidTokenRequirements")):i.error(s("resetPassword.somethingWrong"))}};return l?f?e.jsx("div",{className:"flex min-h-screen",children:e.jsx("div",{className:"flex-1 bg-white flex items-center justify-center px-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("img",{className:"mx-auto w-50",src:"./Icons/logo.png",alt:"",style:{imageRendering:"-webkit-optimize-contrast",WebkitTransform:"translateZ(0)",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}})}),e.jsxs("div",{children:[e.jsxs("button",{className:"flex items-center text-gray-600 text-sm mb-6",onClick:()=>n("/forgot-password"),children:["← ",s("resetPassword.back")]}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:s("resetPassword.title")}),e.jsx("p",{className:"text-gray-600 text-sm mb-8",children:s("resetPassword.instruction")}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.newPassword?"text":"password",required:!0,minLength:8,name:"newPassword",value:r.newPassword,onChange:w,placeholder:s("resetPassword.newPasswordPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none pr-12"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 cursor-pointer transform -translate-y-1/2 text-gray-400",onClick:()=>m("newPassword"),children:a.newPassword?e.jsx(u,{size:20}):e.jsx(x,{size:20})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.confirmPassword?"text":"password",required:!0,minLength:8,name:"confirmNewPassword",value:r.confirmNewPassword,onChange:w,placeholder:s("resetPassword.confirmNewPasswordPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none pr-12"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 cursor-pointer transform -translate-y-1/2 text-gray-400",onClick:()=>m("confirmPassword"),children:a.confirmPassword?e.jsx(u,{size:20}):e.jsx(x,{size:20})})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-red-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-red-700 transition duration-200 disabled:opacity-50",children:c?e.jsx(p,{className:"animate-spin mx-auto text-white",size:28}):s("resetPassword.resetButton")})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:[s("resetPassword.alreadyHaveAccount")," ",e.jsx("button",{type:"button",className:"text-red-600 hover:underline cursor-pointer",onClick:()=>n("/login"),children:s("resetPassword.login")})]})]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-100 p-6",children:[e.jsx("div",{className:"text-center mb-8 mt-4",children:e.jsx("img",{className:"mx-auto w-50",src:"./Icons/logo.png",alt:"",style:{imageRendering:"-webkit-optimize-contrast",WebkitTransform:"translateZ(0)",transform:"translateZ(0)",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[e.jsxs("button",{className:"flex items-center text-gray-600 text-sm mb-6",onClick:()=>n("/forgot-password"),children:["← ",s("resetPassword.back")]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:s("resetPassword.title")}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:s("resetPassword.instruction")}),e.jsxs("form",{className:"space-y-4",onSubmit:h,children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.newPassword?"text":"password",required:!0,minLength:8,name:"newPassword",value:r.newPassword,onChange:w,placeholder:s("resetPassword.newPasswordPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg pr-12"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform cursor-pointer -translate-y-1/2 text-gray-400",onClick:()=>m("newPassword"),children:a.newPassword?e.jsx(u,{size:20}):e.jsx(x,{size:20})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a.confirmPassword?"text":"password",required:!0,minLength:8,name:"confirmNewPassword",value:r.confirmNewPassword,onChange:w,placeholder:s("resetPassword.confirmNewPasswordPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg pr-12"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform cursor-pointer -translate-y-1/2 text-gray-400",onClick:()=>m("confirmPassword"),children:a.confirmPassword?e.jsx(u,{size:20}):e.jsx(x,{size:20})})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-red-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50",children:c?e.jsx(p,{className:"animate-spin mx-auto text-white",size:28}):s("resetPassword.resetButton")})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:[s("resetPassword.alreadyHaveAccount")," ",e.jsx("button",{type:"button",className:"text-blue-600",onClick:()=>n("/login"),children:s("resetPassword.login")})]})]})]}):null};export{W as default};
