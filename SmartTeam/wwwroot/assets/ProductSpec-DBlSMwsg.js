import{l as P,q as R,e as B,r as b,J as T,K as U,b2 as Y,b3 as H,b4 as K,I as V,b5 as Z,R as O,j as e,c as h,a3 as v,y as c}from"./index-DLTHSUkz.js";import{A as J}from"./arrow-left-BAdYOKnR.js";import{C as W}from"./circle-check-big-fa_Fwxsb.js";import{C as ee}from"./circle-x-DINr7gLx.js";import{D as se}from"./dollar-sign-4cpRiWeQ.js";import{F as u}from"./file-text-CLW6rUWD.js";import{D as te}from"./download-Bmr42Arw.js";import{T as g}from"./trash-2-DKYwOl1C.js";import{S as ae}from"./square-pen-CAZ1jkj-.js";import{P as w}from"./plus-P4biRvHf.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],le=P("circle-alert",ie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k=P("settings",re),ye=()=>{const{id:n}=R(),S=B(),[o,x]=b.useState(!1),[l,d]=b.useState([]),{data:t,isLoading:D}=T(n);console.log(t);const{data:r,isLoading:M,refetch:p}=U(n),[A,{isLoading:y}]=Y(),[C,{isLoading:j}]=H(),[q]=K(),{data:F,isLoading:Q,refetch:G}=V(),[L,{isLoading:X}]=Z(),f=F?.filter(s=>s.productId===n)||[];O.useEffect(()=>{if(r?.specificationGroups){const s=r.specificationGroups.flatMap(a=>a.items.map(i=>({name:i.name||"",value:i.value||"",unit:i.unit||"",type:i.type||0})));d(s)}else o&&l.length===0&&d([{name:"",value:"",unit:"",type:0}])},[r,o]);const $=()=>{d([...l,{name:"",value:"",unit:"",type:0}])},E=s=>{d(a=>a.length>1?a.filter((i,m)=>m!==s):a)},N=(s,a,i)=>{const m=[...l];m[s][a]=i,d(m)},I=async()=>{if(!l.every(i=>i.name.trim()!==""&&i.value.trim()!=="")){c.error("Zəhmət olmasa bütün sahələri doldurun");return}const a=[{groupName:"Spesifikasiyalar",items:l}];try{r?.specificationGroups?(await C({id:n,specificationGroups:a}).unwrap(),c.success("Xüsusiyyətlər uğurla yeniləndi!")):(await A({id:n,productId:n,specificationGroups:a}).unwrap(),c.success("Xüsusiyyətlər uğurla əlavə olundu!")),x(!1),p()}catch(i){c.error(i?.data?.message||"Xüsusiyyətlər saxlanılmadı")}},z=async()=>{try{await q({id:n}).unwrap(),c.success("Spesifikasiyalar silindi"),x(!1),p()}catch{c.error("Spesifikasiyaları silmək mümkün olmadı")}},_=async s=>{try{await L({id:s}).unwrap(),c.success("PDF uğurla silindi"),G()}catch(a){c.error(a?.data?.message||"PDF silinmədi")}};return D?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Yüklənir..."})}):t?e.jsxs("div",{className:"min-h-screen bg-[#181818] text-white",children:[e.jsx("div",{className:" border-b border-gray-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>S("/admin/products"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(J,{className:"w-5 h-5"}),"Məhsullara qayıt"]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"text-sm text-gray-400",children:["Məhsul ID: ",t.id]})})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl overflow-hidden",children:e.jsx("img",{src:`${h}/${t.imageUrl}`,alt:t.name,className:"w-full object-contain h-full max-h-[500px]",onError:s=>{s.target.src="/Icons/logo.png";const a=s.target.closest("div");a&&(a.className="bg-white rounded-xl overflow-hidden")}})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold !text-white mb-2",children:t.name}),e.jsxs("p",{className:"text-gray-400",children:["Slug: ",t.slug]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.isActive?e.jsx(W,{className:"w-5 h-5 text-green-400"}):e.jsx(ee,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:`font-medium ${t.isActive?"text-green-400":"text-red-400"}`,children:t.isActive?"Aktiv":"Deaktiv"})]}),t.isHotDeal&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-orange-400"}),e.jsx("span",{className:"text-orange-400 font-medium",children:"Xüsusi təklif"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold !text-white mb-3 flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Qiymətlər"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Qiymət"}),e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[t?.price," AZN"]})]}),e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Endirimli Qiymət"}),e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[t?.discountedPrice||0," AZN"]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold !text-white mb-3 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Anbar məlumatı"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Stok miqdarı"}),e.jsx("p",{className:"text-xl font-bold text-white",children:t.stockQuantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Minimum sifariş"}),e.jsx("p",{className:"text-xl font-bold text-white",children:t.minimumOrderQuantity||1})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Vəziyyət"}),e.jsx("p",{className:`font-medium ${t.stockQuantity===0?"text-red-400":t.stockQuantity<=10?"text-orange-400":"text-green-400"}`,children:t.stockQuantity===0?"Stokda yoxdur":t.stockQuantity<=10?"Az stok":"Stokda var"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-800 col-span-2 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold !text-white mb-3",children:"Məhsul Məlumatları"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Kateqoriya"}),e.jsx("p",{className:"text-white",children:t.categoryName||"Kateqoriyasız"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Brend"}),e.jsx("p",{className:"text-white",children:t.brandName||"Brendsiz"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Açıqlama"}),e.jsx("p",{className:"text-gray-300",children:t.description})]}),t.shortDescription&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Qısa açıqlama"}),e.jsx("p",{className:"text-gray-300",children:t.shortDescription})]})]})]}),t.images&&t.images.length>0&&e.jsxs("div",{className:"bg-gray-800 col-span-2 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold !text-white mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Məhsul şəkilləri (",t.images.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.images.map((s,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square bg-gray-700 rounded-lg overflow-hidden",children:e.jsx("img",{src:`${h}/${s.imageUrl}`,alt:s.altText||`Product image ${a+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",onError:i=>{i.target.src="/Icons/logo.png"}})}),s.isPrimary&&e.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-md font-semibold",children:"Əsas"}),e.jsxs("div",{className:"absolute bottom-2 right-2 bg-gray-900/80 text-white text-xs px-2 py-1 rounded",children:["#",s.sortOrder]})]},s.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold !text-white flex items-center gap-2",children:[e.jsx(u,{className:"w-6 h-6"}),"Məhsul faylları"]})}),Q?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-400",children:"Fayllar yüklənir"})}):f.length>0?e.jsx("div",{className:"space-y-4",children:f.map(s=>e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-blue-600 rounded-lg p-3",children:e.jsx(u,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"!text-white font-medium",children:s.originalFileName||s.filename}),s.description&&e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-400",children:[e.jsxs("span",{children:[(s.fileSize/1024/1024).toFixed(2)," MB"]}),e.jsxs("span",{children:["Yüklənmə sayı: ",s.downloadCount]}),s.isActive?e.jsx("span",{className:"text-green-400",children:"Aktiv"}):e.jsx("span",{className:"text-red-400",children:"Deaktiv"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`${h}/${s.filePath}`,download:!0,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"PDF yüklə",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(s.id),disabled:X,className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50",title:"PDF sil",children:e.jsx(g,{className:"w-4 h-4"})})]})]},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"Heç bir sənəd yüklənməyib"}),e.jsx("p",{className:"text-gray-500",children:"Məhsul sənədləri yükləndikdən sonra burada görünəcək"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold !text-white flex items-center gap-2",children:[e.jsx(k,{className:"w-6 h-6"}),"Məhsul Xüsusiyyətləri"]}),e.jsx("div",{className:"flex items-center gap-3",children:o?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{if(x(!1),r?.specificationGroups){const s=r.specificationGroups.flatMap(a=>a.items);d(s)}},className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Ləğv et"}),e.jsx("button",{onClick:I,disabled:y||j,className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white rounded-lg transition-colors",children:y||j?"Yadda saxlanılır...":"Xüsusiyyətləri yadda saxla"})]}):e.jsxs(e.Fragment,{children:[r?.specificationGroups&&e.jsxs("button",{onClick:z,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(g,{className:"w-4 h-4"}),"Hamısını sil"]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-colors",children:[r?.specificationGroups?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"}),r?.specificationGroups?"Redaktə et":"Əlavə et"," Xüsusiyyətlər"]})]})})]}),M?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-400",children:"Xüsusiyyətlər yüklənir..."})}):!o&&l.length>0?e.jsx("div",{className:"bg-gray-700 rounded-lg p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-4",children:l.map((s,a)=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-600 last:border-b-0",children:[e.jsx("span",{className:"text-gray-300 font-medium",children:s.name}),e.jsxs("span",{className:"text-white",children:[s.value," ",s.unit]})]},a))})}):o?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-4 bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Xüsusiyyət adı"}),e.jsx("input",{type:"text",value:s.name,onChange:i=>N(a,"name",i.target.value),placeholder:"Məs: Rəng",className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Dəyər"}),e.jsx("input",{type:"text",value:s.value,onChange:i=>N(a,"value",i.target.value),placeholder:"Məs: Qırmızı",className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",required:!0})]})]}),l.length>1&&e.jsx("button",{onClick:()=>E(a),className:"mt-6 p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors",children:e.jsx(g,{className:"w-5 h-5"})})]},a))}),e.jsxs("button",{onClick:$,className:"w-full flex items-center justify-center gap-2 px-4 py-4 border-2 border-dashed border-gray-600 hover:border-gray-500 rounded-lg text-gray-400 hover:text-gray-300 transition-colors",children:[e.jsx(w,{className:"w-5 h-5"}),"Yeni xüsusiyyət əlavə et"]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"Xüsusiyyətlər əlavə edilməyib"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Məhsul haqqında əlavə məlumatları buraya daxil edin"})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Məhsul tapılmadı"})})};export{ye as default};
