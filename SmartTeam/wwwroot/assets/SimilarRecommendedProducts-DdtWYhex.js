import{r as t,i as A,b as S,u as I,A as P,y as c,j as e,U as T,M as U,N as M}from"./index-DLTHSUkz.js";import{C as F}from"./CartUtils-BCvxUx-5.js";import{P as k}from"./ProductCard-B2CdsBDq.js";const z=()=>e.jsxs("div",{className:"bg-white rounded-md shadow-sm border border-gray-100 overflow-hidden min-w-[150px] md:min-w-[180px] lg:min-w-[270px] h-[280px] lg:h-[350px] flex flex-col",children:[e.jsx("div",{className:"aspect-square bg-gray-200 animate-pulse"}),e.jsxs("div",{className:"p-4 space-y-3 flex-1 flex flex-col",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/2"}),e.jsx("div",{className:"mt-auto h-6 bg-gray-200 rounded animate-pulse w-1/3"})]})]}),H=({products:n,isLoading:v})=>{const l=t.useRef(null),[w,d]=t.useState(!1),[b,m]=t.useState(""),[h,{isLoading:E}]=A(),[u]=S(),[j,x]=t.useState(new Set),[f,y]=t.useState(!1),{t:o}=I();t.useEffect(()=>{y(P.isAuthenticated())},[]);const N=t.useCallback(async(s,a,i=1)=>{if(s){x(r=>new Set(r).add(s));try{f?await h({productId:s,quantity:i}).unwrap():(F.addItem(a,i),window.dispatchEvent(new Event("cartUpdated"))),c.success(o("addedToCart"))}catch(r){console.error(r),r?.status===401||r?.data?.status===401?(m("add items to cart"),d(!0)):c.error(o("failedAddToCart"))}finally{setTimeout(()=>{x(r=>{const g=new Set(r);return g.delete(s),g})},500)}}},[f,h,o]),C=t.useCallback(async s=>{if(s)try{await u({productId:s}).unwrap()}catch(a){console.error(a),a?.status===401||a?.data?.status===401?(m("add items to favorites"),d(!0)):c.error("Failed to update favorites")}},[u]),p=s=>{if(l.current){const a=l.current,i=a.offsetWidth*.8;s==="left"?a.scrollBy({left:-i,behavior:"smooth"}):a.scrollBy({left:i,behavior:"smooth"})}};return v?e.jsxs("div",{className:"mt-12 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 px-4 md:px-0",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 animate-pulse"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"})]})]}),e.jsx("div",{className:"flex overflow-x-auto gap-4 pb-4 px-4 md:px-0 scrollbar-hide",children:[...Array(6)].map((s,a)=>e.jsx("div",{className:"min-w-[150px] md:min-w-[180px] lg:min-w-[270px] h-[280px] lg:h-[350px]",children:e.jsx(z,{})},a))})]}):!n||n.length===0?null:e.jsxs("section",{className:"mt-16 mb-12",children:[e.jsx(T,{isOpen:w,onClose:()=>d(!1),action:b}),e.jsxs("div",{className:"flex items-center justify-between mb-8 px-4 md:px-0",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-[#197853]",style:{fontFamily:"Inter, Poppins, Montserrat, sans-serif"},children:o("similarProd")}),e.jsxs("div",{className:"hidden md:flex space-x-3",children:[e.jsx("button",{onClick:()=>p("left"),className:"p-3 bg-white border border-gray-100 rounded-full shadow-sm hover:bg-[#197853] hover:text-white hover:border-[#197853] transition-all duration-300 text-gray-600 group",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p("right"),className:"p-3 bg-white border border-gray-100 rounded-full shadow-sm hover:bg-[#197853] hover:text-white hover:border-[#197853] transition-all duration-300 text-gray-600 group",children:e.jsx(M,{className:"w-5 h-5"})})]})]}),e.jsx("div",{ref:l,className:"flex items-stretch overflow-x-auto gap-4 pb-8 px-4 md:px-0 scrollbar-hide snap-x snap-mandatory",style:{scrollBehavior:"smooth"},children:n.map(s=>{const a={url:s.primaryImageUrl,name:s.name,priceOriginal:s.price,price:s.discountedPrice&&s.discountedPrice>0?s.discountedPrice:s.price,id:s.id,description:s.description||s.shortDescription,discountPercentage:s.discountPercentage,isHotDeal:s.isHotDeal};return e.jsx("div",{className:"snap-start flex-none flex",children:e.jsx(k,{col:!0,info:a,productData:s,handleAddToCart:N,isAddingToCart:j.has(s.id),toggleFavorite:C,compact:!0})},s.id)})})]})};export{H as S};
