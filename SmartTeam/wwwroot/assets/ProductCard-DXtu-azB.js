import{r as n,a as Q,u as z,j as e,L as j,c as I,t as L}from"./index-DXStjdCc.js";import{H as _}from"./heart-jU-8cjoc.js";import{C as w}from"./check-Dpn_xF6k.js";function V({col:q,info:v,productData:x,handleAddToCart:N,isAddingToCart:F,toggleFavorite:$,isFavorite:H=!1,compact:a=!1}){const{id:o,url:C,name:c,description:m,isHotDeal:P}=v,d=parseFloat(x?.price)||0,u=parseFloat(x?.discountedPrice)||0,l=u>0&&u<d,g=l?u:d,b=l?d:0,f=v.discountPercentage||(l?Math.round((d-u)/d*100):0),[G,J]=n.useState(H),[y,O]=n.useState(!1),[r,E]=n.useState(!1),[p,k]=n.useState(c),[h,T]=n.useState(m),{data:M}=Q({productId:o}),{i18n:S,t:i}=z();n.useEffect(()=>{async function t(){const s=S.language;s==="en"?(k(await L(c,s)),T(await L(m,s))):(k(c),T(m))}t()},[S.language,c,m]),n.useEffect(()=>{if(r){const t=setTimeout(()=>E(!1),2e3);return()=>clearTimeout(t)}},[r]);const A=t=>{if(t.preventDefault(),t.stopPropagation(),N){const s=x?.minimumOrderQuantity||1;N(o,x,s),E(!0),window.dispatchEvent(new Event("cartAnimation"))}},D=async t=>{if(t.preventDefault(),t.stopPropagation(),!(y||!$))try{await $(o)}catch{}},B=({isCompact:t,isRow:s})=>g<=0?null:e.jsxs("div",{className:`${s?"flex items-center gap-3 mt-4 flex-wrap":"mt-auto border-t border-gray-100/50 pt-2"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("p",{className:`${t?"text-sm lg:text-lg":s?"text-2xl":"text-lg md:text-xl"} font-bold text-[#197853]`,style:{fontFamily:"Montserrat, sans-serif"},children:[g," ₼"]}),l&&e.jsxs("p",{className:`${t?"text-xs lg:text-sm":"text-sm"} text-gray-400 line-through`,style:{fontFamily:"Montserrat, sans-serif"},children:[b," ₼"]})]}),l&&!s&&e.jsxs("p",{className:`${t?"text-[10px] lg:text-xs":"text-xs"} text-green-600 font-medium mt-1`,style:{fontFamily:"Montserrat, sans-serif"},children:[i("productCard.save")," ",(b-g).toFixed(2)," ₼"]}),l&&s&&e.jsxs("span",{className:"text-xs text-green-600 font-bold bg-green-50 px-2 py-1 rounded",children:[i("productCard.save")," ",(b-g).toFixed(2)," ₼"]})]});return q?e.jsxs("div",{className:`bg-white shadow-[0_4px_20px_rgba(0,0,0,0.08)] rounded-md overflow-hidden relative group transition-all duration-300 h-full flex flex-col hover:shadow-xl transform hover:-translate-y-1 ${a?"min-w-[150px] max-w-[150px] md:min-w-[180px] md:max-w-[180px] lg:min-w-[270px] lg:max-w-[270px]":""}`,children:[e.jsx(j,{to:`/details/${o}`,className:"block",children:e.jsxs("div",{className:`aspect-square relative bg-transparent flex items-center justify-center ${a?"p-2 lg:p-4":"p-4"}`,children:[e.jsx("img",{src:`${I}/${C}`,alt:p||"Product",className:"w-full h-full object-contain",onError:t=>{t.target.src="/Icons/logo.png"}}),P&&e.jsx("div",{className:`absolute top-2 right-2 bg-[#1A8B5E] text-white rounded font-semibold ${a?"text-[10px] lg:text-xs px-1.5 py-0.5 lg:px-2 lg:py-1":"text-xs px-2 py-1"}`,children:i("productCard.hotDeal")}),l&&f>0&&e.jsxs("div",{className:`absolute top-2 left-2 bg-[#197853] text-white rounded-full font-semibold ${a?"text-[10px] lg:text-xs px-1.5 py-0.5 lg:px-2 lg:py-1":"text-xs px-2 py-1"}`,children:["-",f,"%"]})]})}),e.jsxs("div",{className:`${a?"p-2 lg:p-3":"p-4"} pt-2 bg-white flex flex-col flex-1`,children:[e.jsxs(j,{to:`/details/${o}`,className:"block flex flex-col flex-1",children:[e.jsxs("div",{className:"flex gap-2 items-start justify-between",children:[e.jsx("h3",{className:`${a?"text-xs lg:text-base h-[2rem] lg:h-[3rem]":"text-base h-[3rem]"} font-semibold text-gray-900 mb-1 line-clamp-2 leading-snug flex-1`,style:{fontFamily:"Montserrat, sans-serif"},children:p}),e.jsx("button",{onClick:D,disabled:y,className:`rounded-full hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed z-10 shrink-0 ${a?"p-1 lg:p-1.5 -mt-0.5 lg:-mt-1":"p-1.5 -mt-1 h-fit"}`,children:e.jsx(_,{className:`transition-all duration-300 ${a?"w-4 h-4 lg:w-5 lg:h-5":"w-5 h-5"} ${M?.isFavorite?"fill-[#197853] text-[#197853]":"text-gray-400 hover:text-[#197853]"}`})})]}),!a&&e.jsx("div",{className:"h-[2.5rem] mb-3",children:h&&e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 leading-tight",style:{fontFamily:"Montserrat, sans-serif"},children:h})}),e.jsx(B,{isCompact:a,isRow:!1})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:A,disabled:F||r,className:`w-full py-2 px-4 rounded-md font-semibold text-xs lg:text-sm transition-all duration-300 flex items-center justify-center gap-2 ${r?"bg-[#197853] text-white":"bg-[#197853] hover:bg-[#1A8B5E] text-white shadow-sm hover:shadow-md"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4"})," ",i("productCard.addedToCart")]}):e.jsx(e.Fragment,{children:i("addToCart")})})})]})]}):e.jsxs(j,{to:`/details/${o}`,className:"p-4 bg-white shadow-md rounded-md border border-gray-200 flex items-center gap-6 relative group transition-all duration-300 hover:shadow-lg",children:[e.jsxs("div",{className:"flex-shrink-0 h-full w-full max-w-[150px] relative bg-transparent overflow-hidden flex items-center justify-center",children:[e.jsx("img",{src:`${I}/${C}`,alt:p||"Product",className:"max-w-[150px] object-contain aspect-square w-full h-full rounded-lg",onError:t=>{t.currentTarget.src="/Icons/logo.png",t.currentTarget.className="object-contain aspect-square w-full h-full rounded-lg"}}),l&&f>0&&e.jsxs("div",{className:"absolute top-2 left-2 bg-[#197853] text-white text-xs px-2 py-1 rounded-full font-semibold",children:["-",f,"%"]}),P&&e.jsx("div",{className:"absolute top-2 right-2 bg-[#1A8B5E] text-white text-xs px-2 py-1 rounded font-semibold",children:i("productCard.hotDeal")})]}),e.jsxs("div",{className:"flex flex-col flex-1 space-y-4 py-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-gray-900",style:{fontFamily:"Montserrat, sans-serif"},children:p}),h&&e.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",style:{fontFamily:"Montserrat, sans-serif"},children:h}),e.jsx(B,{isCompact:!1,isRow:!0})]}),e.jsx("button",{onClick:D,disabled:y,className:"p-2 rounded-full bg-gray-50 hover:bg-gray-100 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(_,{className:`w-6 h-6 transition-all duration-300 ${M?.isFavorite?"fill-[#197853] text-[#197853]":"text-gray-400 hover:text-[#197853]"}`})})]}),e.jsx("div",{className:"flex justify-end mt-auto",children:e.jsx("button",{onClick:A,disabled:F||r,className:`py-2 px-6 rounded-md font-semibold text-sm transition-all duration-300 flex items-center gap-2 ${r?"bg-[#197853] text-white":"bg-[#197853] hover:bg-[#1A8B5E] text-white"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5"})," ",i("productCard.addedToCart")]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity"})," ",i("addToCart")]})})})]})]})}export{V as P};
