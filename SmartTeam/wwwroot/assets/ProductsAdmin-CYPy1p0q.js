import{l as ge,ap as pe,m as fe,r as t,aK as ce,aL as je,I as Ne,aM as ve,aN as we,aO as ke,j as e,y as D,J as Ce,aP as De,aQ as Fe,c as le,u as be,M as Pe,N as Ie,e as Se,D as Me,aR as Qe,k as Le,o as Ue,aS as Ae,a3 as ae,F as me,al as Oe,X as ne}from"./index-DXStjdCc.js";import{M as ue}from"./Modal-it0KzH9o.js";import{U as xe}from"./upload-DRv288pt.js";import{T as oe}from"./trash-2-CQHjR2Pa.js";import{F as he}from"./file-text-BhHmwouq.js";import{L as re}from"./loader-circle-Do0avO8G.js";import{D as qe}from"./dollar-sign-fgpVxksr.js";import{C as de}from"./chevron-down-B4kPK6ik.js";import{E as Ee}from"./eye-Ca6khng2.js";import{P as Be}from"./pen-CEf8liIv.js";import{T as ze}from"./trash-NkDBwHCL.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Re=ge("palette",Ge);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],He=ge("ruler",$e),Te=({setOpen:u})=>{const{data:f,error:d,isRolesLoading:O,refetch:B}=pe(),{data:C,isLoading:ee,errorC:x}=fe(),[$,y]=t.useState([]);t.useEffect(()=>{C&&y([...C].sort((i,l)=>i.name.localeCompare(l.name)))},[C]);const{data:F,isLoading:q}=ce(),{data:K,isLoading:se}=je("1cd62de1-35cd-4d90-b767-dc1a443bdb3f"),{data:W}=Ne(),[H,{isLoading:N}]=ve(),[_,{isLoading:J}]=we(),[v,{isLoading:P}]=ke(),[r,M]=t.useState({name:"",description:"",shortDescription:"",sku:"",isActive:!0,isHotDeal:!1,stockQuantity:0,categoryId:"",brandId:"",price:0,discountedPrice:0,minimumOrderQuantity:0,detailImageUrls:[]}),[h,Z]=t.useState(null),[w,c]=t.useState([]),[j,b]=t.useState(null),[I,T]=t.useState(""),[z,G]=t.useState(""),[Q,X]=t.useState(null),[Y,te]=t.useState([]);t.useEffect(()=>{if(h){const i=URL.createObjectURL(h);return X(i),()=>{URL.revokeObjectURL(i)}}else X(null)},[h]),t.useEffect(()=>{if(w&&w.length>0){const i=Array.from(w).map(l=>URL.createObjectURL(l));return te(i),()=>{i.forEach(l=>URL.revokeObjectURL(l))}}else te([])},[w]);const E=i=>{const l=i.target.files[0];l&&(Z(l),i.target.value="")},n=i=>{const l=Array.from(i.target.files);!l||l.length===0||(c(L=>[...L,...l]),i.target.value="")},o=i=>{const l=i.target.files[0];if(l){if(l.type!=="application/pdf"){D.error("Zəhmət olmasa yalnız PDF faylları yükləyin");return}b(l),i.target.value=""}},m=i=>{c(l=>l.filter((L,U)=>U!==i))},p=()=>{b(null),T(""),G("")},k=()=>{M({name:"",description:"",shortDescription:"",sku:"",isHotDeal:!1,stockQuantity:0,categoryId:"",brandId:"",price:0,discountedPrice:0,minimumOrderQuantity:0}),Z(null),c([]),b(null),T(""),G(""),u(!1)},R=async i=>{if(i.preventDefault(),!h){D.error("Zəhmət olmasa əvvəlcə şəkil yükləyin");return}try{const l=new FormData,L={name:r.name,description:r.description,shortDescription:r.shortDescription,sku:r.sku,isActive:r.isActive,isHotDeal:r.isHotDeal,stockQuantity:r.stockQuantity,categoryId:r.categoryId,brandId:r.brandId,price:Number(r.price),discountedPrice:Number(r.discountedPrice),minimumOrderQuantity:r.minimumOrderQuantity,detailImageUrls:[]};l.append("productData",JSON.stringify(L)),l.append("imageFile",h,h.name);const U=await H(l).unwrap();if(w.length>0){const s=new FormData;w.forEach(g=>{s.append("imageFiles",g,g.name)});const a=await _({id:U.id,images:s}).unwrap()}if(j){const s=new FormData;s.append("ProductId",U.id),s.append("PdfFile",j,j.name),z&&s.append("CustomFileName",z),I&&s.append("Description",I),s.append("IsActive","true"),await v({productId:U.id,formData:s}).unwrap()}D.success("Məhsul uğurla əlavə edildi"),k()}catch(l){D.error(l?.data||l?.message||"Nəsə səhv getdi")}},S=i=>{const{name:l,value:L,type:U,checked:s}=i.target;M(a=>({...a,[l]:U==="checkbox"?s:l==="stockQuantity"||l==="minimumOrderQuantity"?Number(L):L}))},V=i=>{const{name:l,value:L}=i.target;M(U=>({...U,[l]:L}))};return e.jsxs("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto dark-scrollbar",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold !text-white",children:"Yeni məhsul əlavə et"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul adı *"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:S,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul adını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU *"}),e.jsx("input",{type:"text",name:"sku",value:r.sku,onChange:S,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"SKU daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stok miqdarı *"}),e.jsx("input",{type:"number",name:"stockQuantity",value:r.stockQuantity===0?"":r.stockQuantity,onChange:S,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum sifariş miqdarı *"}),e.jsx("input",{type:"number",name:"minimumOrderQuantity",value:r.minimumOrderQuantity===0?"":r.minimumOrderQuantity,onChange:S,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kateqoriya *"}),e.jsxs("select",{name:"categoryId",value:r.categoryId,onChange:S,required:!0,className:"w-full px-3 py-2 dark-scrollbar bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Kateqoriya seçin"}),$?.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Brend *"}),e.jsxs("select",{name:"brandId",value:r.brandId,onChange:S,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Brend seçin"}),F?.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isHotDeal",name:"isHotDeal",checked:r.isHotDeal,onChange:S,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isHotDeal",className:"text-sm font-medium",children:"Xüsusi təklif kimi işarələ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:r.isActive,onChange:S,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Aktiv"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Açıqlama"}),e.jsx("textarea",{name:"description",value:r.description,onChange:S,rows:"4",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul açıqlamasını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qısa açıqlama"}),e.jsx("textarea",{name:"shortDescription",value:r.shortDescription,onChange:S,rows:"2",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Qısa açıqlama daxil edin"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-[#2c2c2c] rounded-md border border-gray-600",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qiymət"}),e.jsx("input",{type:"number",name:"price",value:r.price,onChange:V,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Endirimli qiymət"}),e.jsx("input",{type:"number",name:"discountedPrice",value:r.discountedPrice,onChange:V,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul şəkilləri"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx(xe,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"Şəkil yükləmək üçün klik edin və ya sürükləyin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB each"})]})]}),h&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:Q,alt:"Product preview",className:"w-full h-24 object-cover rounded-md border "}),e.jsx("button",{type:"button",onClick:()=>{Z(null)},className:"absolute top-1 right-1 bg-red-600 hover:bg-red-700 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(oe,{className:"w-3 h-3"})})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ətraflı şəkillər"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:n,className:"hidden",id:"detail-image-upload"}),e.jsxs("label",{htmlFor:"detail-image-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx(xe,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"Şəkil yükləmək üçün klik edin və ya sürükləyin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB each"})]})]}),w.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:w.map((i,l)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:Y[l],alt:`Detail preview ${l+1}`,className:"w-full h-24 object-cover rounded-md border "}),e.jsx("button",{type:"button",onClick:()=>m(l),className:"absolute top-1 right-1 bg-red-600 hover:bg-red-700 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(oe,{className:"w-3 h-3"})})]},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul spesifikasiyası (PDF)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:"application/pdf",onChange:o,className:"hidden",id:"pdf-upload"}),e.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx(he,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"PDF spesifikasiya yükləmək üçün klik edin"}),e.jsx("span",{className:"text-sm text-gray-500",children:"PDF up to 10MB"})]})]}),j&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-[#2c2c2c] rounded-md",children:[e.jsx(he,{className:"w-8 h-8 text-indigo-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:j.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[(j.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",onClick:p,className:"bg-red-600 hover:bg-red-700 text-white rounded-full p-2",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Xüsusi fayl adı (İxtiyari)"}),e.jsx("input",{type:"text",value:z,onChange:i=>G(i.target.value),className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"PDF üçün xüsusi ad daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"PDF açıqlaması (İxtiyari)"}),e.jsx("textarea",{value:I,onChange:i=>T(i.target.value),rows:"2",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"PDF üçün açıqlama daxil edin"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>k(),className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold",disabled:N||J||P,children:"Ləğv et"}),e.jsx("button",{type:"button",onClick:R,disabled:N||J||P,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:N||J||P?"Əlavə edilir...":"Məhsul əlavə et"})]})]})]})},Ke=({setOpen:u,idPr:f})=>{const{data:d,isLoading:O}=Ce(f,{skip:!f}),[B,{isLoading:C}]=De(),[ee]=Fe(),{data:x}=fe(),[$,y]=t.useState([]);t.useEffect(()=>{x&&y([...x].sort((n,o)=>n.name.localeCompare(o.name)))},[x]);const{data:F}=ce(),{data:q}=pe(),[K,se]=t.useState(null),[W,H]=t.useState(null),[N,_]=t.useState(null),[J,v]=t.useState(!1),[P,r]=t.useState([]),[M,h]=t.useState([]),[Z,w]=t.useState([]),[c,j]=t.useState({name:"",description:"",shortDescription:"",sku:"",isActive:!0,isHotDeal:!1,stockQuantity:0,categoryId:"",brandId:"",price:0,discountedPrice:0,minimumOrderQuantity:0});t.useEffect(()=>{d&&d.id&&(j({name:d.name||"",description:d.description||"",shortDescription:d.shortDescription||"",sku:d.sku||"",isActive:!!d.isActive,isHotDeal:!!d.isHotDeal,stockQuantity:d.stockQuantity||0,categoryId:d.categoryId||"",brandId:d.brandId||"",price:d.price||0,discountedPrice:d.discountedPrice||0,minimumOrderQuantity:d.minimumOrderQuantity||0}),d.imageUrl&&H(d.imageUrl),d.images&&d.images.length>0&&r(d.images))},[d]);const b=n=>{const{name:o,value:m,type:p,checked:k}=n.target;j(R=>({...R,[o]:p==="checkbox"?k:o==="stockQuantity"||o==="minimumOrderQuantity"?Number(m):m}))},I=n=>{const{name:o,value:m}=n.target;j(p=>({...p,[o]:m}))},T=n=>{const o=n.target.files[0];if(o){if(!o.type.startsWith("image/")){D.error("Zəhmət olmasa düzgün şəkil faylı seçin");return}if(o.size>5*1024*1024){D.error("Şəkil ölçüsü 5MB-dan az olmalıdır");return}se(o),H(URL.createObjectURL(o))}},z=()=>{se(null),H(d?.imageUrl||null)},G=n=>{const o=n.target.files[0];if(o){if(o.type!=="application/pdf"){D.error("Zəhmət olmasa düzgün PDF faylı seçin");return}if(o.size>10*1024*1024){D.error("PDF ölçüsü 10MB-dan az olmalıdır");return}_(o),v(!0)}},Q=()=>{_(null),v(!1)},X=n=>{const o=Array.from(n.target.files),m=[];for(const p of o){if(!p.type.startsWith("image/")){D.error(`${p.name} düzgün şəkil faylı deyil`);continue}if(p.size>5*1024*1024){D.error(`${p.name} 5MB-dan böyükdür`);continue}m.push(p)}m.length>0&&h(p=>[...p,...m])},Y=n=>{const o=P[n];w(m=>[...m,o]),r(m=>m.filter((p,k)=>k!==n))},te=n=>{h(o=>o.filter((m,p)=>p!==n))},E=async n=>{n.preventDefault();try{const o={name:c.name,description:c.description,shortDescription:c.shortDescription,sku:c.sku,isActive:c.isActive,isHotDeal:c.isHotDeal,stockQuantity:c.stockQuantity,categoryId:c.categoryId,brandId:c.brandId,price:Number(c.price),discountedPrice:Number(c.discountedPrice),minimumOrderQuantity:c.minimumOrderQuantity,detailImageUrls:P.map(k=>k.imageUrl)},m=new FormData;m.append("productData",JSON.stringify(o)),K&&m.append("imageFile",K),J&&N&&m.append("pdfFile",N),M.length>0&&M.forEach(k=>{m.append("detailImageFiles",k)});const p=await B({id:f,formData:m}).unwrap();se(null),_(null),v(!1),h([]),w([]),D.success("Məhsul uğurla yeniləndi"),u()}catch(o){console.error("Edit error:",o)}};return O?e.jsx("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-4xl w-full flex items-center justify-center",children:e.jsx("p",{children:"Məhsul yüklənir..."})}):e.jsxs("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto dark-scrollbar",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold !text-white",children:"Məhsulu redaktə et"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul şəkli"}),e.jsxs("div",{className:"flex items-center gap-4",children:[W?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K?W:`${le}/${W}`,alt:"Product preview",className:"w-32 h-32 object-cover rounded-md border border-gray-600",onError:n=>{n.target.src="/Icons/logo.png"}}),e.jsx("button",{type:"button",onClick:z,className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center",children:"×"})]}):e.jsx("div",{className:"w-32 h-32 bg-[#2c2c2c] border-2 border-dashed border-gray-600 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Şəkil yoxdur"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"imageFile",accept:"image/*",onChange:T,className:"hidden"}),e.jsx("label",{htmlFor:"imageFile",className:"inline-block px-4 py-2 bg-[#2c2c2c] hover:bg-[#3c3c3c] border border-gray-600 rounded-md cursor-pointer transition-colors",children:K?"Şəkli dəyişdir":"Şəkil yüklə"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Dəstəklənir: JPG, PNG, GIF (maksimum 5MB)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul PDF"}),e.jsxs("div",{className:"flex items-center gap-4",children:[d?.pdfUrl&&!N&&e.jsx("a",{href:`${le}/${d.pdfUrl}`,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 text-sm underline",children:"Hazırkı PDF-ə bax"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"pdfFile",accept:"application/pdf",onChange:G,className:"hidden"}),e.jsx("label",{htmlFor:"pdfFile",className:"inline-block px-4 py-2 bg-[#2c2c2c] hover:bg-[#3c3c3c] border border-gray-600 rounded-md cursor-pointer transition-colors",children:N?`Seçildi: ${N.name}`:d?.pdfUrl?"PDF-i dəyişdir":"PDF yüklə"}),N&&e.jsx("button",{type:"button",onClick:Q,className:"ml-2 px-3 py-2 bg-red-600 hover:bg-red-700 rounded-md text-sm",children:"Sil"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Dəstəklənir: PDF (maksimum 10MB)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ətraflı şəkillər"}),P.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Hazırkı şəkillər"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:P.map((n,o)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`${le}/${n.imageUrl}`,alt:`Detail ${o+1}`,className:"w-full h-32 object-cover rounded-md border border-gray-600",onError:m=>{m.target.src="/Icons/logo.png"}}),e.jsx("button",{type:"button",onClick:()=>Y(o),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center",children:"×"})]},n.id))})]}),M.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Yeni şəkillər (yüklənəcək)"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:M.map((n,o)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(n),alt:`New ${o+1}`,className:"w-full h-32 object-cover rounded-md border border-gray-600"}),e.jsx("button",{type:"button",onClick:()=>te(o),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center",children:"×"})]},o))})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"galleryImages",accept:"image/*",multiple:!0,onChange:X,className:"hidden"}),e.jsx("label",{htmlFor:"galleryImages",className:"inline-block px-4 py-2 bg-[#2c2c2c] hover:bg-[#3c3c3c] border border-gray-600 rounded-md cursor-pointer transition-colors",children:"Ətraflı şəkillər əlavə et"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Bir neçə şəkil seçin. JPG, PNG, GIF (hər biri maksimum 5MB)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Məhsul adı *"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:b,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul adını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU"}),e.jsx("input",{type:"text",name:"sku",value:c.sku,onChange:b,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"SKU daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kateqoriya *"}),e.jsxs("select",{name:"categoryId",value:c.categoryId,onChange:b,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Kateqoriya seçin"}),$?.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Brend *"}),e.jsxs("select",{name:"brandId",value:c.brandId,onChange:b,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Brend seçin"}),F?.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stok miqdarı *"}),e.jsx("input",{type:"number",name:"stockQuantity",value:c.stockQuantity,onChange:b,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum sifariş miqdarı *"}),e.jsx("input",{type:"number",name:"minimumOrderQuantity",value:c.minimumOrderQuantity,onChange:b,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isHotDeal",name:"isHotDeal",checked:c.isHotDeal,onChange:b,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isHotDeal",className:"text-sm font-medium",children:"Xüsusi təklif kimi işarələ"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:c.isActive,onChange:b,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Aktiv"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Açıqlama"}),e.jsx("textarea",{name:"description",value:c.description,onChange:b,rows:"4",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Məhsul açıqlamasını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qısa açıqlama"}),e.jsx("textarea",{name:"shortDescription",value:c.shortDescription,onChange:b,rows:"2",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Qısa açıqlama daxil edin"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-[#2c2c2c] rounded-md border border-gray-600",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qiymət"}),e.jsx("input",{type:"number",name:"price",value:c.price,onChange:I,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Endirimli qiymət"}),e.jsx("input",{type:"number",name:"discountedPrice",value:c.discountedPrice,onChange:I,min:"0",step:"0.01",className:"w-full px-3 py-2 bg-[#1f1f1f] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors",children:"Ləğv et"}),e.jsx("button",{type:"button",onClick:E,disabled:C,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C?"Yenilənir...":"Məhsulu yenilə"})]})]})]})};function _e({currentPage:u,totalPages:f,onPageChange:d}){const{t:O}=be(),B=()=>{const x=[];if(f<=5)for(let y=1;y<=f;y++)x.push(y);else{x.push(1);let y=Math.max(2,u-1),F=Math.min(f-1,u+1);u<=3&&(F=4),u>=f-2&&(y=f-3),y>2&&x.push("...");for(let q=y;q<=F;q++)x.push(q);F<f-1&&x.push("..."),x.push(f)}return x},C=()=>{u>1&&d(u-1)},ee=()=>{u<f&&d(u+1)};return f<=1?null:e.jsx("nav",{className:"flex items-center justify-center mt-12 mb-8","aria-label":O("pagination.navigation"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:C,disabled:u===1,className:`w-10 h-10 rounded-full flex justify-center items-center transition-all duration-300
            ${u===1?"text-gray-300 cursor-not-allowed":"text-[#197853] hover:text-white hover:bg-[#197853] cursor-pointer"}`,"aria-label":O("pagination.previousPage"),children:e.jsx(Pe,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex items-center gap-1",children:B().map((x,$)=>x==="..."?e.jsx("span",{className:"w-10 h-10 flex items-center justify-center text-[#197853]/50 font-sans",children:"..."},`ellipsis-${$}`):e.jsx("button",{onClick:()=>d(x),disabled:u===x,className:`w-10 h-10 rounded-full text-sm font-sans font-semibold transition-all duration-300
                  ${u===x?"bg-[#197853] text-white shadow-md shadow-[#197853]/20 transform scale-110":"text-[#197853] hover:text-[#0A4A30] hover:bg-[#197853]/5 cursor-pointer"}`,"aria-label":`${O("pagination.page")} ${x}`,"aria-current":u===x?"page":void 0,children:x},x))}),e.jsx("button",{onClick:ee,disabled:u===f,className:`w-10 h-10 rounded-full flex justify-center items-center transition-all duration-300
            ${u===f?"text-gray-300 cursor-not-allowed":"text-[#197853] hover:text-white hover:bg-[#197853] cursor-pointer"}`,"aria-label":O("pagination.nextPage"),children:e.jsx(Ie,{className:"w-5 h-5"})})]})})}const is=()=>{const{t:u}=be(),f=Se(),[d,O]=t.useState(1),[B]=t.useState(12),{data:C,isLoading:ee,error:x,refetch:$}=Me({page:d,pageSize:B}),{data:y,isSummaryLoading:F}=Qe(),{data:q,isLoading:K}=Le(),[se,W]=t.useState(!1),[H,N]=t.useState(null),[_,J]=t.useState(null),[v,P]=t.useState(""),[r,M]=t.useState([]),[h,Z]=t.useState([]),[w,c]=t.useState({}),[j,b]=t.useState(!1),[I,T]=t.useState(!1),z=t.useRef(null),G=t.useRef(null),{data:Q,isLoading:X}=ce(),[Y,{isLoading:te}]=Ue(),[E,n]=t.useState(null),[o]=Ae(),m=t.useMemo(()=>v.length>0||r.length>0||h.length>0,[v,r,h]);t.useEffect(()=>{O(1)},[v,r,h]),t.useEffect(()=>{const s=setTimeout(async()=>{if(m){const a=r.length>0?r[0]:null;let g=null;if(h.length>0&&Q){const A=Q.find(ye=>ye.id===h[0]);A&&(g=A.slug),!g&&A&&A.name&&(g=A.name.toLowerCase())}const ie={categoryId:a,brandSlug:g,searchTerm:v||null,page:d,pageSize:B,minPrice:null,maxPrice:null,isHotDeal:null,isRecommended:null,filterCriteria:[]};try{const A=await Y(ie).unwrap();n(A)}catch(A){console.error("Filtering failed",A),n({products:[],totalCount:0})}}else n(null)},500);return()=>{clearTimeout(s)}},[m,d,B,v,r,h,Q,Y]);const p=async s=>{try{await o({id:s}).unwrap(),D.success(u("admin.productDeletedSuccess")),R()}catch(a){D.error(a?.data||u("admin.deletingProductFailed"))}},k=s=>{f(`/admin/products/${s.id}`)},R=()=>{N(!1),W(!1),$()};t.useEffect(()=>{const s=a=>{z.current&&!z.current.contains(a.target)&&b(!1)};return j&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[j]),t.useEffect(()=>{const s=a=>{G.current&&!G.current.contains(a.target)&&T(!1)};return I&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[I]);const S=s=>{c(a=>({...a,[s]:!a[s]}))},V=s=>{M(a=>a.includes(s)?a.filter(g=>g!==s):[...a,s])},i=s=>{Z(a=>a.includes(s)?a.filter(g=>g!==s):[...a,s])},l=t.useMemo(()=>m&&E?E.products||[]:C?.items||[],[m,E,C]),L=t.useMemo(()=>m&&E?E.totalCount||0:C?.totalCount||0,[m,E,C]),U=Math.ceil(L/B);return e.jsxs("div",{className:"text-white p-4 min-h-screen",children:[e.jsx(ue,{open:H==="add",setOpen:R,children:e.jsx(Te,{setOpen:R})}),e.jsx(ue,{open:H==="edit",setOpen:R,children:e.jsx(Ke,{setOpen:R,idPr:_})}),e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-bold !text-white mb-2",children:u("admin.products")}),e.jsx("p",{className:"text-gray-400",children:u("admin.manageProducts")})]}),e.jsx("button",{onClick:()=>N("add"),className:"md:px-6 md:py-3 px-4 py-2 bg-white text-sm md:text-base transition-all duration-300 rounded-lg font-semibold text-gray-900 shadow-lg transform hover:bg-gray-100 hover:scale-105",children:u("admin.addNewProduct")})]}),ee?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(re,{className:"w-12 h-12 animate-spin text-indigo-500"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Ümumi məhsullar"}),F?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(re,{className:"w-6 h-6 animate-spin text-blue-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:y?.totalProducts||0})]}),e.jsx(ae,{className:"w-8 h-8 text-blue-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Anbarda var"}),F?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(re,{className:"w-6 h-6 animate-spin text-green-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:y?.inStockProducts||0})]}),e.jsx(qe,{className:"w-8 h-8 text-green-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm",children:"Az qalıb"}),F?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(re,{className:"w-6 h-6 animate-spin text-orange-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:y?.lowStockProducts||0})]}),e.jsx(ae,{className:"w-8 h-8 text-orange-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 p-6 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm",children:"Anbarda yoxdur"}),F?e.jsx("div",{className:"flex justify-center items-center py-2",children:e.jsx(re,{className:"w-6 h-6 animate-spin text-red-200"})}):e.jsx("p",{className:"text-white text-2xl font-bold",children:y?.outOfStockProducts||0})]}),e.jsx(ae,{className:"w-8 h-8 text-red-200"})]})})]}),e.jsxs("div",{className:"flex flex-col  mb-9",children:[e.jsxs("div",{className:"mb-3 flex flex-col md:flex-row gap-4 items-start md:items-center",children:[e.jsx("div",{className:"w-full md:w-auto",ref:z,children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>b(!j),className:"flex items-center gap-2 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white hover:bg-gray-700 transition-all",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Kateqoriya"}),e.jsx(de,{className:`w-4 h-4 transition-transform duration-200 ${j?"transform rotate-180":""}`})]}),j&&!K&&q&&q.length>0&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 min-w-[280px] max-h-[500px] overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-2",children:[q.map(s=>e.jsxs("div",{className:"border-b border-gray-700 last:border-b-0 pb-2 last:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-gray-700 rounded-lg transition-colors group",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-500 cursor-pointer border-gray-600 rounded focus:ring-blue-500 bg-gray-700",checked:r.includes(s.id),onChange:()=>V(s.id)}),e.jsx("span",{className:"font-medium text-sm text-white",children:s.name})]}),e.jsx("button",{onClick:()=>S(s.id),className:"p-1 hover:bg-gray-600 rounded transition-colors",children:e.jsx(de,{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${w[s.id]?"transform rotate-180":""}`})})]}),w[s.id]&&s.subCategories&&s.subCategories.length>0&&e.jsx("div",{className:"mt-2 ml-6 space-y-1 border-l border-gray-700 pl-2",children:s.subCategories.map(a=>e.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-500 cursor-pointer border-gray-600 rounded focus:ring-blue-500 bg-gray-700",checked:r.includes(a.id),onChange:()=>V(a.id)}),e.jsx("span",{children:a.name})]},a.id))})]},s.id)),r.length>0&&e.jsx("button",{onClick:()=>M([]),className:"w-full mt-3 px-4 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-gray-700 rounded-lg transition-colors",children:"Filtrləri təmizlə"})]})})]})}),e.jsx("div",{className:"w-full md:w-auto",ref:G,children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>T(!I),className:"flex items-center gap-2 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white hover:bg-gray-700 transition-all",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Brend"}),e.jsx(de,{className:`w-4 h-4 transition-transform duration-200 ${I?"transform rotate-180":""}`})]}),I&&!X&&Q&&Q.length>0&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 min-w-[200px] max-h-[400px] overflow-y-auto",children:e.jsxs("div",{className:"p-4 space-y-2",children:[Q.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-500 cursor-pointer border-gray-600 rounded focus:ring-blue-500 bg-gray-700",checked:h.includes(s.id),onChange:()=>i(s.id)}),e.jsx("span",{children:s.name})]},s.id)),h.length>0&&e.jsx("button",{onClick:()=>Z([]),className:"w-full mt-3 px-4 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-gray-700 rounded-lg transition-colors",children:"Brendləri təmizlə"})]})})]})}),e.jsx("div",{className:"flex-1 md:ml-auto md:max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Məhsul axtar...",value:v,onChange:s=>P(s.target.value),className:"w-full pl-12 pr-12 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),v&&e.jsx("button",{onClick:()=>P(""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:e.jsx(ne,{className:"w-5 h-5"})})]})})]}),(r.length>0||h.length>0)&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[r.map(s=>{let a="";return q?.forEach(g=>{if(g.id===s)a=g.name;else if(g.subCategories){const ie=g.subCategories.find(A=>A.id===s);ie&&(a=ie.name)}}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white text-xs rounded-full",children:["Kateqoriya: ",a,e.jsx("button",{onClick:()=>V(s),className:"hover:text-red-300 transition-colors",children:e.jsx(ne,{className:"w-3 h-3"})})]},s)}),h.map(s=>{const a=Q?.find(g=>g.id===s);return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-600 text-white text-xs rounded-full",children:["Brend: ",a?.name,e.jsx("button",{onClick:()=>i(s),className:"hover:text-red-300 transition-colors",children:e.jsx(ne,{className:"w-3 h-3"})})]},s)})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l?.map(s=>e.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"relative h-48 bg-gray-700",children:[e.jsx("img",{className:"w-full h-full object-contain bg-white cursor-pointer",src:`${le}/${s.primaryImageUrl}`,alt:s.name,onClick:()=>k(s),onError:a=>{a.target.src="/Icons/logo.png"}}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[e.jsx("button",{onClick:()=>k(s),className:"bg-green-600 hover:bg-green-700 p-2 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",title:"Məhsula bax",children:e.jsx(Ee,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),N("edit"),J(s.id)},className:"bg-blue-600 hover:bg-blue-700 p-2 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",title:"Məhsulu redaktə et",children:e.jsx(Be,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),p(s.id)},className:"bg-red-600 hover:bg-red-700 p-2 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",title:"Məhsulu sil",children:e.jsx(ze,{className:"w-4 h-4 text-white"})})]}),e.jsx("div",{className:"absolute top-3 left-3",children:s.stockQuantity===0?e.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Anbarda yoxdur"}):s.stockQuantity<=10?e.jsx("span",{className:"bg-orange-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Anbarda azdır"}):e.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:"Anbarda var"})})]}),e.jsxs("div",{className:"p-5 cursor-pointer",onClick:()=>k(s),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold !text-white mb-1 truncate hover:text-blue-400 transition-colors",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm truncate",children:s.slug})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"text-2xl font-bold text-green-400",children:[s.discountedPrice>0?s.discountedPrice:s.price," AZN"]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),"Stok"]}),e.jsx("span",{className:"text-white font-medium",children:s.stockQuantity})]}),s.colors&&s.colors.length>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(Re,{className:"w-4 h-4"}),"Rənglər"]}),e.jsx("span",{className:"text-white font-medium",children:s.colors.length})]}),s.sizes&&s.sizes.length>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(He,{className:"w-4 h-4"}),"Ölçülər"]}),e.jsx("span",{className:"text-white font-medium",children:s.sizes.length})]})]}),s.colors&&s.colors.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Mövcud rənglər:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.colors.slice(0,4).map((a,g)=>e.jsx("span",{className:"bg-gray-700 text-gray-300 px-2 py-1 rounded text-xs",children:a},g)),s.colors.length>4&&e.jsxs("span",{className:"text-gray-400 text-xs self-center",children:["+",s.colors.length-4," daha çox"]})]})]}),s.sizes&&s.sizes.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Mövcud ölçülər:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.sizes.slice(0,4).map((a,g)=>e.jsx("span",{className:"bg-gray-700 text-gray-300 px-2 py-1 rounded text-xs",children:a},g)),s.sizes.length>4&&e.jsxs("span",{className:"text-gray-400 text-xs self-center",children:["+",s.sizes.length-4," daha çox"]})]})]})]})]},s.id))}),l&&l.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx(ae,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),v?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"Heç bir nəticə tapılmadı"}),e.jsxs("p",{className:"text-gray-500 mb-6",children:['"',v,'" üçün məhsul tapılmadı']}),e.jsx("button",{onClick:()=>P(""),className:"px-6 py-3 bg-gray-700 transition rounded-lg font-semibold text-white hover:bg-gray-600",children:"Axtarışı təmizlə"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"Heç bir məhsul tapılmadı"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"İlk məhsulunu əlavə etməklə başla"}),e.jsx("button",{onClick:()=>N("add"),className:"px-6 py-3 bg-white transition rounded-lg font-semibold text-gray-900 hover:bg-gray-100",children:"Məhsul əlavə et"})]})]}),e.jsx(_e,{currentPage:d,totalPages:U,onPageChange:s=>{O(s),window.scrollTo({top:0,behavior:"smooth"})}})]})]})]})};export{is as default};
