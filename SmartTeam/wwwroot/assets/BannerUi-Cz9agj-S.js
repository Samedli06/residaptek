import{l as ie,k as ne,d as oe,aU as de,aV as ce,aW as me,r as m,j as e,c as U,aX as Y,aY as xe,y as d}from"./index-DLTHSUkz.js";import{M as _}from"./Modal-RhXXIzwv.js";import{P as ue}from"./plus-P4biRvHf.js";import{L as $}from"./loader-circle-BGmTCRFh.js";import{P as he}from"./pen-BBhN4KSI.js";import{T as j}from"./trash-zH8imY1j.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],v=ie("image",ge),we=()=>{const{data:R,isCatsLoading:K}=ne(),{data:z,isBannersLoading:Q,error:pe,refetch:T}=oe(),[X]=de(),[H,{isLoading:G}]=ce(),[ee,{isLoading:Z}]=me(),[E,L]=m.useState(null),[te,q]=m.useState(null),se=({isOpen:n,onClose:b})=>{const[l,x]=m.useState(null),[F,w]=m.useState(null),[y,u]=m.useState(null),[D,k]=m.useState(null),[N,M]=m.useState(""),[A,i]=m.useState(!1),[g]=Y(),[h,p]=m.useState({title:"",description:"",linkUrl:"",buttonText:"",type:0,isActive:!0,sortOrder:0,startDate:"2025-09-21T13:38:28.551Z",endDate:"2025-09-21T13:38:28.551Z"}),C=(()=>{if(!R)return[];const t=[];return R.forEach(s=>{t.push({id:s.id,name:s.name,slug:s.slug,level:0,parentName:null}),s.subCategories&&s.subCategories.length>0&&s.subCategories.forEach(o=>{t.push({id:o.id,name:o.name,slug:o.slug,level:1,parentName:s.name}),o.subCategories&&o.subCategories.length>0&&o.subCategories.forEach(f=>{t.push({id:f.id,name:f.name,slug:f.slug,level:2,parentName:`${s.name} > ${o.name}`})})})}),t})(),S=t=>{M(t.id);let s;t.level===0?s=`/${t.slug}`:s=`/products/${t.slug}`,p(o=>({...o,linkUrl:s})),i(!1)},r=()=>{if(!N)return"";const t=C.find(s=>s.id===N);return t?t.name:""},a=async t=>{if(t.preventDefault(),!l){d.error("Zəhmət olmasa şəkil faylı seçin");return}const s={...h,type:Number(h.type),sortOrder:Number(h.sortOrder),isActive:!!h.isActive},o=new FormData,f=JSON.stringify(s);o.append("bannerData",f),o.append("imageFile",l);try{const I=await H(o).unwrap();if(y&&I?.id)try{await g({id:I.id,imageFile:y}).unwrap()}catch(V){console.error("Error uploading mobile image:",V),d.warning("Banner yaradıldı, lakin mobil şəkil yüklənmədi: "+(V.data?.message||V.message))}d.success("Banner uğurla əlavə edildi!"),T(),b(),p({title:"",description:"",linkUrl:"",buttonText:"",type:0,isActive:!0,sortOrder:0,startDate:"2025-09-21T13:38:28.551Z",endDate:"2025-09-21T13:38:28.551Z"}),x(null),w(null),u(null),k(null),M("")}catch(I){console.error("Error adding banner:",I),d.error("Banner əlavə etmək uğursuz oldu: "+(I.data?.message||I.message))}},c=t=>{const s=t.target.files[0];if(s){if(s.size>10*1024*1024){d.error("Fayl ölçüsü 10MB-dan az olmalıdır");return}if(!s.type.startsWith("image/")){d.error("Zəhmət olmasa düzgün şəkil faylı seçin");return}x(s);const o=new FileReader;o.onload=f=>{w(f.target.result)},o.readAsDataURL(s)}},B=()=>{x(null),w(null);const t=document.getElementById("banner-image-input");t&&(t.value="")},W=t=>{const s=t.target.files[0];if(s){if(s.size>10*1024*1024){d.error("Fayl ölçüsü 10MB-dan az olmalıdır");return}if(!s.type.startsWith("image/")){d.error("Zəhmət olmasa düzgün şəkil faylı seçin");return}u(s);const o=new FileReader;o.onload=f=>{k(f.target.result)},o.readAsDataURL(s)}},J=()=>{u(null),k(null);const t=document.getElementById("banner-mobile-image-input");t&&(t.value="")};return e.jsxs("div",{className:" rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold !text-white mb-6",children:"Yeni banner əlavə et"}),e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Banner başlığı"}),e.jsx("input",{type:"text",value:h.title,onChange:t=>p(s=>({...s,title:t.target.value})),className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banner başlığını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Düymə mətni"}),e.jsx("input",{type:"text",value:h.buttonText,onChange:t=>p(s=>({...s,buttonText:t.target.value})),className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"məs: İndi alış veriş et, Ətraflı öyrən"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Link URL"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>i(!A),className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white text-left focus:ring-2 focus:ring-blue-500 focus:border-transparent flex items-center justify-between",children:[e.jsx("span",{className:r()?"text-white":"text-gray-400",children:r()||"Kateqoriya seçin..."}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${A?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A&&e.jsx("div",{className:"absolute bg-gray-800 z-10 w-full mt-1 border border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:K?e.jsx("div",{className:"px-4 py-3 text-gray-400 text-center",children:"Kateqoriyalar yüklənir..."}):C.length===0?e.jsx("div",{className:"px-4 py-3 text-gray-400 text-center",children:"Kateqoriya mövcud deyil"}):C.map(t=>e.jsx("button",{type:"button",onClick:()=>S(t),className:`w-full text-left px-4 py-2 hover:bg-gray-600 transition-colors ${N===t.id?"bg-gray-600 text-blue-400":"text-white"}`,style:{paddingLeft:`${t.level*1.5+1}rem`},children:e.jsxs("span",{className:"flex items-center gap-2",children:[t.level>0&&e.jsx("span",{className:"text-gray-500",children:"└─"}),t.name,t.parentName&&e.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",t.parentName,")"]})]})},t.id))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-600"}),e.jsx("span",{className:"text-xs text-gray-500",children:"və ya əl ilə daxil edin"}),e.jsx("div",{className:"flex-1 h-px bg-gray-600"})]}),e.jsx("input",{type:"text",value:h.linkUrl,onChange:t=>{p(s=>({...s,linkUrl:t.target.value})),M("")},className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://misal.com/səhifə və ya /xüsusi-yol"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:t=>p(s=>({...s,description:t.target.value})),className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Açıqlama daxil edin..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Banner şəkli (Desktop) *"}),F?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-gray-600",children:[e.jsx("img",{src:F,alt:"Preview",className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-200",children:e.jsx("button",{type:"button",onClick:B,className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200",children:e.jsx(j,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white font-medium",children:l?.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[l?(l.size/1024/1024).toFixed(2):0," MB"]})]})]}),e.jsx("button",{type:"button",onClick:B,className:"text-red-400 hover:text-red-300 p-1",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-3 py-2 text-sm inline-block",children:[e.jsx("span",{children:"Şəkli dəyişdir"}),e.jsx("input",{type:"file",className:"sr-only",accept:"image/*",onChange:c})]})})]}):e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-lg hover:border-gray-500 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-400",children:[e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-2 py-1",children:[e.jsx("span",{children:"Fayl yüklə"}),e.jsx("input",{id:"banner-image-input",type:"file",className:"sr-only",accept:"image/*",onChange:c})]}),e.jsx("p",{className:"pl-1",children:"və ya sürükləyin"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Banner şəkli (Mobile)"}),D?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-gray-600",children:[e.jsx("img",{src:D,alt:"Mobile Preview",className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-200",children:e.jsx("button",{type:"button",onClick:J,className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200",children:e.jsx(j,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white font-medium",children:y?.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[y?(y.size/1024/1024).toFixed(2):0," MB"]})]})]}),e.jsx("button",{type:"button",onClick:J,className:"text-red-400 hover:text-red-300 p-1",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-3 py-2 text-sm inline-block",children:[e.jsx("span",{children:"Şəkli dəyişdir"}),e.jsx("input",{type:"file",className:"sr-only",accept:"image/*",onChange:W})]})})]}):e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-lg hover:border-gray-500 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-400",children:[e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-2 py-1",children:[e.jsx("span",{children:"Fayl yüklə"}),e.jsx("input",{id:"banner-mobile-image-input",type:"file",className:"sr-only",accept:"image/*",onChange:W})]}),e.jsx("p",{className:"pl-1",children:"və ya sürükləyin"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:h.isActive,onChange:t=>p(s=>({...s,isActive:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-300",children:"Aktiv (vebsaytda görünür)"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:G,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:G?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-5 h-5 animate-spin"}),"Yaradılır..."]}):"Banner yarat"}),e.jsx("button",{type:"button",onClick:b,className:"flex-1 bg-gray-600 hover:text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200",children:"Ləğv et"})]})]})]})},ae=({isOpen:n,onClose:b,banner:l})=>{const[x,F]=m.useState(null),[w,y]=m.useState(null),[u,D]=m.useState(null),[k,N]=m.useState(null),[M]=Y(),[A]=xe();m.useEffect(()=>{l&&(l.imageUrl&&!x&&y(`${U}/${l.imageUrl}`),l.mobileImageUrl&&!u&&N(`${U}/${l.mobileImageUrl}`))},[l,x,u]);const[i,g]=m.useState({title:l?.title||"",titleVisible:l?.titleVisible,description:l?.description||"",descriptionVisible:l?.descriptionVisible,linkUrl:l?.linkUrl||"",buttonText:l?.buttonText||"",buttonVisible:l?.buttonVisible,type:l?.type||0,isActive:l?.isActive??!0,sortOrder:l?.sortOrder||0,startDate:l?.startDate||"2025-09-21T13:38:28.551Z",endDate:l?.endDate||"2025-09-21T13:38:28.551Z"}),h=async r=>{r.preventDefault();try{const a={title:i.title,titleVisible:i.titleVisible,description:i.description,descriptionVisible:i.descriptionVisible,linkUrl:i.linkUrl,buttonText:i.buttonText,buttonVisible:i.buttonVisible,type:Number(i.type),isActive:!!i.isActive,sortOrder:Number(i.sortOrder),startDate:i.startDate,endDate:i.endDate};if(await ee({id:l.id,...a}).unwrap(),x)try{await A({id:l.id,imageFile:x}).unwrap()}catch(c){console.error("Error uploading desktop image:",c),d.warning("Banner yeniləndi, lakin desktop şəkil yüklənmədi: "+(c.data?.message||c.message))}if(u)try{await M({id:l.id,imageFile:u}).unwrap()}catch(c){console.error("Error uploading mobile image:",c),d.warning("Banner yeniləndi, lakin mobil şəkil yüklənmədi: "+(c.data?.message||c.message))}d.success("Banner uğurla yeniləndi!"),T(),b()}catch(a){console.error("Error updating banner:",a),d.error("Banneri yeniləmək uğursuz oldu: "+(a.data?.message||a.message))}},p=r=>{const a=r.target.files[0];if(a){if(a.size>10*1024*1024){d.error("Fayl ölçüsü 10MB-dan az olmalıdır");return}if(!a.type.startsWith("image/")){d.error("Zəhmət olmasa düzgün şəkil faylı seçin");return}D(a);const c=new FileReader;c.onload=B=>{N(B.target.result)},c.readAsDataURL(a)}},O=()=>{D(null),N(null);const r=document.getElementById("edit-banner-mobile-image-input");r&&(r.value="")},C=r=>{const a=r.target.files[0];if(a){if(a.size>10*1024*1024){d.error("Fayl ölçüsü 10MB-dan az olmalıdır");return}if(!a.type.startsWith("image/")){d.error("Zəhmət olmasa düzgün şəkil faylı seçin");return}F(a);const c=new FileReader;c.onload=B=>{y(B.target.result)},c.readAsDataURL(a)}},S=()=>{F(null),y(null);const r=document.getElementById("edit-banner-image-input");r&&(r.value="")};return e.jsxs("div",{className:" rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-bold !text-white mb-6",children:"Banneri redaktə et"}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Banner başlığı *"}),e.jsx("input",{type:"text",value:i.title,onChange:r=>g(a=>({...a,title:r.target.value})),className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banner başlığını daxil edin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Düymə mətni"}),e.jsx("input",{type:"text",value:i.buttonText,onChange:r=>g(a=>({...a,buttonText:r.target.value})),className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"məs: İndi alış veriş et, Ətraflı öyrən"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Link URL"}),e.jsx("input",{type:"text",value:i.linkUrl,onChange:r=>g(a=>({...a,linkUrl:r.target.value})),className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://misal.com/səhifə və ya /xüsusi-yol"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Açıqlama"}),e.jsx("textarea",{value:i.description,onChange:r=>g(a=>({...a,description:r.target.value})),rows:4,className:"w-full px-4 py-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banner açıqlamasını daxil edin"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"editIsActive",checked:i.isActive,onChange:r=>g(a=>({...a,isActive:r.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),e.jsx("label",{htmlFor:"editIsActive",className:"ml-2 block text-sm text-gray-300",children:"Banner görünürlüyü"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"editIsActive",checked:i.buttonVisible,onChange:r=>g(a=>({...a,buttonVisible:r.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),e.jsx("label",{htmlFor:"editIsActive",className:"ml-2 block text-sm text-gray-300",children:"Düymə görünürlüyü"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"editIsActive",checked:i.titleVisible,onChange:r=>g(a=>({...a,titleVisible:r.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),e.jsx("label",{htmlFor:"editIsActive",className:"ml-2 block text-sm text-gray-300",children:"Başlıq görünürlüyü"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"editIsActive",checked:i.descriptionVisible,onChange:r=>g(a=>({...a,descriptionVisible:r.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),e.jsx("label",{htmlFor:"editIsActive",className:"ml-2 block text-sm text-gray-300",children:"Açıqlama görünürlüyü"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Banner şəkli (Desktop)"}),!w&&!l?.imageUrl?e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-lg hover:border-gray-500 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-400",children:[e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-2 py-1",children:[e.jsx("span",{children:"Fayl yüklə"}),e.jsx("input",{id:"edit-banner-image-input",type:"file",className:"sr-only",accept:"image/*",onChange:C})]}),e.jsx("p",{className:"pl-1",children:"və ya sürükləyin"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-gray-600",children:[e.jsx("img",{src:w||`${U}/${l?.imageUrl}`,alt:"Desktop Preview",className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-200",children:e.jsx("button",{type:"button",onClick:S,className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200",children:e.jsx(j,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white font-medium",children:x?.name||"Mövcud desktop şəkil"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[x?(x.size/1024/1024).toFixed(2):""," ",x?"MB":""]})]})]}),e.jsx("button",{type:"button",onClick:S,className:"text-red-400 hover:text-red-300 p-1",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-3 py-2 text-sm inline-block",children:[e.jsx("span",{children:"Şəkli dəyişdir"}),e.jsx("input",{type:"file",className:"sr-only",accept:"image/*",onChange:C})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Banner şəkli (Mobile)"}),!k&&!l?.mobileImageUrl?e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-lg hover:border-gray-500 transition-colors",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-400",children:[e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-2 py-1",children:[e.jsx("span",{children:"Fayl yüklə"}),e.jsx("input",{id:"edit-banner-mobile-image-input",type:"file",className:"sr-only",accept:"image/*",onChange:p})]}),e.jsx("p",{className:"pl-1",children:"və ya sürükləyin"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-gray-600",children:[e.jsx("img",{src:k||`${U}/${l?.mobileImageUrl}`,alt:"Mobile Preview",className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-200",children:e.jsx("button",{type:"button",onClick:O,className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors duration-200",children:e.jsx(j,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white font-medium",children:u?.name||"Mövcud mobil şəkil"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[u?(u.size/1024/1024).toFixed(2):""," ",u?"MB":""]})]})]}),e.jsx("button",{type:"button",onClick:O,className:"text-red-400 hover:text-red-300 p-1",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"relative cursor-pointer rounded-md font-medium text-blue-400 hover:text-blue-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-blue-500 px-3 py-2 text-sm inline-block",children:[e.jsx("span",{children:"Şəkli dəyişdir"}),e.jsx("input",{type:"file",className:"sr-only",accept:"image/*",onChange:p})]})})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",disabled:Z,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:Z?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-5 h-5 animate-spin"}),"Yenilənir..."]}):"Banneri yenilə"}),e.jsx("button",{type:"button",onClick:b,className:"flex-1 bg-gray-600 hover:text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200",children:"Ləğv et"})]})]})]})},le=async n=>{try{await X({id:n}).unwrap(),d.success("Banner uğurla silindi"),T()}catch(b){d.error(b?.data||"Banneri silmək uğursuz oldu")}},P=()=>{L(null),q(null)},re=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:"text-white p-4 min-h-screen",children:[e.jsx(_,{open:E==="add",setOpen:P,children:e.jsx(se,{isOpen:E==="add",onClose:P})}),e.jsx(_,{open:E==="edit",setOpen:P,children:e.jsx(ae,{isOpen:E==="edit",onClose:P,banner:te})}),e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-bold !text-white mb-2",children:"Bannerlər"}),e.jsx("p",{className:"text-gray-400",children:"Vebsayt bannerlərini idarə et"})]}),e.jsxs("button",{onClick:()=>L("add"),className:"md:px-6 md:py-3 px-4 py-2 bg-white text-sm md:text-base transition-all duration-300 rounded-lg font-semibold text-gray-900 shadow-lg transform hover:bg-gray-100 hover:scale-105 flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5"}),"Banner əlavə et"]})]}),Q?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx($,{className:"w-12 h-12 animate-spin text-indigo-500"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:z?.map(n=>e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300",children:e.jsxs("div",{className:"md:flex",children:[e.jsxs("div",{className:"md:w-1/3 relative min-h-[180px] h-64 md:h-auto bg-gray-700",children:[e.jsx("img",{className:"w-full h-full object-cover",src:`${U}/${n.imageUrl}`,alt:n.title,onError:b=>{b.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200' viewBox='0 0 400 200'%3E%3Crect width='400' height='200' fill='%23374151'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%239CA3AF' font-size='16'%3ENo Image%3C/text%3E%3C/svg%3E"}}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:`${n.isActive?"bg-green-600":"bg-red-600"} text-white px-3 py-1 rounded-full text-sm font-semibold`,children:n.isActive?"Aktiv":"Deaktiv"})})]}),e.jsx("div",{className:"md:w-2/3 p-6 flex flex-col justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold !text-white mb-2",children:n.title}),e.jsx("p",{className:"text-gray-400 text-base leading-relaxed",children:n.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{L("edit"),q(n)},className:"bg-blue-600 hover:bg-blue-700 p-3 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",children:e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:()=>le(n.id),className:"bg-red-600 hover:bg-red-700 p-3 rounded-lg shadow-lg transform hover:scale-110 transition-all duration-200",children:e.jsx(j,{className:"w-4 h-4 text-white"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[n.linkUrl&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-400 w-20",children:"Link:"}),e.jsx("a",{href:n.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 hover:underline",children:n.linkUrl})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-400 w-20",children:"Yaradılıb:"}),e.jsx("span",{className:"text-gray-300",children:re(n.createdAt)})]})]})]})})]})},n.id))}),z&&z.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx(v,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"Banner tapılmadı"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"İlk bannerinizi yaradaraq başlayın"}),e.jsx("button",{onClick:()=>L("add"),className:"px-6 py-3 bg-white transition rounded-lg font-semibold text-gray-900 hover:bg-gray-100",children:"Banner əlavə et"})]})]})]})]})};export{we as default};
