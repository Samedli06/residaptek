import{l as W,u as Y,e as J,H as X,ae as K,af as Z,a0 as ee,ag as se,ah as te,r,ai as ae,j as e,aj as F,X as re,c as le,a4 as d,ak as oe,y as k}from"./index-BBhEgxr5.js";import{B as ne}from"./Breadcrumb-DITKjOb7.js";import{S as ie}from"./shopping-bag-DhD4ebYR.js";import{C as E}from"./circle-check-big-BNNvvqDD.js";import{C as P}from"./clock-C4JeKsr-.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ce=W("award",de),be=()=>{const{t:s}=Y(),c=J(),{data:S,isLoading:A,error:m}=X(),[C,{isLoading:u,error:xe}]=K(),[L,{isLoading:D}]=Z(),{data:O}=ee(),{data:me}=se(),{data:l,isLoading:B}=te(),[o,f]=r.useState(""),[h,p]=r.useState(""),[n,g]=r.useState(""),[M,I]=r.useState(!1),[U,T]=r.useState(!1),[z,b]=r.useState(!1),[$,j]=r.useState(!1),[N,w]=r.useState(null),{data:a,isLoading:G}=ae(N,{skip:!N}),[Q,_]=r.useState(!1);r.useEffect(()=>{_(!0)},[]);const q=t=>{w(t),j(!0)},y=()=>{j(!1),w(null)};s("profile.normalUser"),s("profile.retail"),s("profile.wholesale"),s("profile.vip");const H=t=>t?.status===401?s("profile.unauthorizedMessage"):t?.data?.message?t.data.message:t?.message?t.message:s("profile.errorOccurred"),R=async t=>{if(t.preventDefault(),!(n===o&&n!==""))try{await C({currentPass:n,newPass:o,confirmNewPassword:o}).unwrap(),g(""),f(""),p(s("profile.passwordChangedSuccess")),I(!1),T(!1),setTimeout(()=>p(""),3e3)}catch(i){console.error("Failed to change password:",i)}},V=async()=>{try{await L().unwrap(),document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",k.success(s("profile.loggedOutSuccess")),c("/login")}catch(t){console.error("Failed to logout:",t),k.error(s("profile.logoutFailed"))}};if(A)return e.jsx("div",{className:"flex justify-center items-center min-h-[60vh] bg-[#F5F9F7]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#197853]"})});if(m)return e.jsx("div",{className:"flex justify-center items-center min-h-[60vh] bg-[#F5F9F7]",children:e.jsx("div",{className:"text-[#197853] font-sans",children:H(m)})});const x={pending:l?.filter(t=>t.status===0).length||0,delivered:l?.filter(t=>t.status===2).length||0,total:l?.length||0},v=t=>{switch(t){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-200";case 1:return"bg-blue-100 text-blue-700 border-blue-200";case 2:return"bg-green-100 text-green-700 border-green-200";case 3:return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return e.jsxs("section",{className:"bg-[#F5F9F7] min-h-screen pb-20 pt-8 font-sans",children:[e.jsx("style",{children:`
        .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
        .animate-scale-in { animation: scaleIn 0.4s ease-out forwards; }
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
      `}),z&&e.jsx("div",{className:"fixed inset-0 bg-[#197853]/40 backdrop-blur-sm flex items-center justify-center z-[5000] px-4 animate-fade-in-up",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full shadow-2xl relative overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#197853]/5 rounded-full flex items-center justify-center mb-4",children:e.jsx(F,{className:"w-8 h-8 text-[#197853] ml-1"})}),e.jsx("h3",{className:"text-xl font-bold text-[#197853] mb-2 font-sans",children:s("profile.confirmLogout")}),e.jsx("p",{className:"text-gray-500 mb-6 text-sm font-sans",children:s("profile.logoutMessage")}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-3 border border-gray-200 rounded-xl text-gray-600 font-sans font-medium hover:bg-gray-50 transition-colors",children:s("profile.cancel")}),e.jsx("button",{onClick:V,className:"flex-1 py-3 bg-[#197853] text-white rounded-xl font-sans font-medium hover:bg-[#0A4A30] transition-colors shadow-lg shadow-[#197853]/20",children:s(D?"profile.loggingOut":"profile.logout")})]})]})})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[5000] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl animate-scale-in",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[e.jsxs("h3",{className:"text-xl font-bold text-[#197853]",children:[s("profile.orderDetails")," ",a?.orderNumber?`#${a.orderNumber}`:""]}),e.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-200 rounded-full transition-colors text-gray-500",children:e.jsx(re,{size:20})})]}),e.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:G?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#197853]"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl space-y-2",children:[e.jsx("span",{className:"text-sm text-gray-500 block",children:s("profile.status")}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold border ${v(a.status||0)}`,children:a.statusText})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl space-y-2",children:[e.jsx("span",{className:"text-sm text-gray-500 block",children:s("profile.orderDate")}),e.jsxs("span",{className:"font-bold text-gray-800",children:[new Date(a.createdAt).toLocaleDateString()," ",new Date(a.createdAt).toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"border border-gray-100 rounded-xl p-4 space-y-2",children:[e.jsx("h4",{className:"font-bold text-[#197853] mb-3 text-sm uppercase tracking-wide",children:s("profile.deliveryInfo")}),e.jsxs("p",{className:"text-gray-700",children:[e.jsxs("strong",{children:[s("profile.customer"),":"]})," ",a.customerName]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsxs("strong",{children:[s("profile.pharmacyName")||"Pharmacy",":"]})," ",a.pharmacyName||"-"]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-[#197853] mb-4 text-sm uppercase tracking-wide",children:[s("profile.items")," (",a.items?.length||0,")"]}),e.jsxs("div",{className:"space-y-3",children:[console.log(a),a.items?.map((t,i)=>e.jsxs("div",{className:"flex gap-4 p-3 border border-gray-100 rounded-xl bg-gray-50/50",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center border border-gray-100 overflow-hidden shrink-0",children:t.imageUrl?e.jsx("img",{src:`${le}/${t.imageUrl}`,alt:t.productName,className:"w-full h-full object-cover"}):e.jsx(d,{className:"text-gray-300 w-8 h-8"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-bold text-gray-800 text-sm mb-1 line-clamp-2",children:t.productName}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[t.quantity," x ₼",t.unitPrice?.toFixed(2)]}),e.jsxs("span",{className:"font-bold text-[#197853]",children:["₼",(t.quantity*t.unitPrice).toFixed(2)]})]})]})]},i))]})]}),e.jsx("div",{className:"border-t border-gray-100 pt-4 mt-4 space-y-2",children:e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-[#197853]",children:[e.jsx("span",{children:s("profile.totalAmount")}),e.jsxs("span",{children:["₼ ",a.totalAmount?.toFixed(2)]})]})})]}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:s("profile.orderNotFound")})}),e.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50 text-center",children:e.jsx("button",{onClick:y,className:"px-6 py-2 bg-[#197853] text-white rounded-xl font-medium hover:bg-[#0A4A30] transition-colors",children:s("profile.close")})})]})}),e.jsxs("div",{className:`max-w-[1200px] mx-auto px-4 lg:px-8 ${Q?"animate-fade-in-up":"opacity-0"}`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx(ne,{}),e.jsxs("h1",{className:"text-3xl lg:text-4xl font-sans font-bold text-[#197853] mt-4 mb-2",children:[s("profile.hello"),", ",S?.firstName,"!"]}),e.jsx("p",{className:"text-[#1A8B5E] font-sans text-sm tracking-wide",children:s("profile.welcomeBack")})]}),e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-6 py-2.5 border border-[#197853] text-[#197853] rounded-full hover:bg-[#197853] hover:text-white transition-all duration-300 font-sans font-medium text-sm button-hover shadow-sm",children:[e.jsx(F,{className:"w-4 h-4"}),s("profile.logout")]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#197853] to-[#1A8B5E] rounded-2xl p-6 text-white shadow-xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-xl group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-[#4CAF7E]/30 rounded-full -ml-12 -mb-12 blur-lg group-hover:scale-125 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-sans font-medium opacity-90 !text-white",children:s("profile.loyaltyPoints")}),e.jsxs("div",{className:"text-3xl font-sans font-bold mt-1 tracking-tight",children:[O?.balance||0," ",e.jsx("span",{className:"text-sm font-normal opacity-70",children:s("profile.pts")})]})]}),e.jsx("div",{className:"bg-white/20 p-2 rounded-xl backdrop-blur-sm",children:e.jsx(ce,{className:"w-6 h-6 text-[#FFB84D]"})})]}),e.jsxs("button",{onClick:()=>c("/products"),className:"w-full py-3 bg-white text-[#197853] rounded-xl font-sans text-sm font-bold transition-all hover:bg-gray-50 flex items-center justify-center gap-2 shadow-lg active:scale-95",children:[e.jsx(ie,{size:18}),s("startShopping")]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-[#F3E7E1] p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-[#197853] font-sans font-bold mb-4 flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-[#4CAF7E]"}),s("profile.accountOverview")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FDFBF8] rounded-xl border border-[#F3E7E1]/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center text-blue-600",children:e.jsx(d,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm text-gray-600 font-sans",children:s("profile.totalOrders")})]}),e.jsx("span",{className:"font-bold text-[#197853]",children:x.total})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FDFBF8] rounded-xl border border-[#F3E7E1]/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-green-600",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm text-gray-600 font-sans",children:s("profile.delivered")})]}),e.jsx("span",{className:"font-bold text-[#197853]",children:x.delivered})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#FDFBF8] rounded-xl border border-[#F3E7E1]/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-50 flex items-center justify-center text-yellow-600",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm text-gray-600 font-sans",children:s("profile.pending")})]}),e.jsx("span",{className:"font-bold text-[#197853]",children:x.pending})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-[#F3E7E1] p-6 shadow-sm",children:[e.jsx("h3",{className:"text-[#197853] font-sans font-bold mb-4",children:s("profile.security")}),h&&e.jsxs("div",{className:"mb-4 p-3 bg-green-50 text-green-700 text-sm rounded-lg border border-green-200 font-sans flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),h]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:M?"text":"password",placeholder:s("profile.currentPasswordPlaceholder"),value:n,onChange:t=>g(t.target.value),className:"w-full px-4 py-2.5 bg-[#F9F9F9] border border-[#DEE2E6] rounded-xl text-sm focus:outline-none focus:border-[#197853]/50 focus:ring-1 focus:ring-[#197853]/20 transition-all font-sans"})}),e.jsx("div",{children:e.jsx("input",{type:U?"text":"password",placeholder:s("profile.newPasswordPlaceholder"),value:o,onChange:t=>f(t.target.value),className:"w-full px-4 py-2.5 bg-[#F9F9F9] border border-[#DEE2E6] rounded-xl text-sm focus:outline-none focus:border-[#197853]/50 focus:ring-1 focus:ring-[#197853]/20 transition-all font-sans"})}),e.jsx("button",{type:"submit",disabled:u||!n||!o,className:"w-full py-2.5 bg-[#197853] text-white rounded-xl font-sans font-medium text-sm hover:bg-[#0A4A30] transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-md shadow-[#197853]/20",children:s(u?"profile.updating":"profile.updatePassword")})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-[#F3E7E1] p-6 lg:p-8 shadow-sm h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-sans font-bold text-[#197853]",children:s("profile.orderHistory")}),e.jsx("button",{className:"text-[#197853] text-sm font-sans font-medium hover:text-[#0A4A30] transition-colors",children:s("profile.viewAllOrders")})]}),e.jsx("div",{className:"space-y-4",children:B?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#197853]"})}):l?.length>0?l.map(t=>e.jsxs("div",{onClick:()=>q(t.id),className:"group border border-[#F3E7E1] rounded-xl p-4 lg:p-5 hover:border-[#197853]/50 hover:shadow-md transition-all duration-300 bg-[#F5F9F7]/50 cursor-pointer relative",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-[#197853]/5 rounded-lg group-hover:bg-[#197853]/10 transition-colors",children:e.jsx(d,{className:"w-6 h-6 text-[#197853]"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-sans font-bold text-[#197853] text-sm md:text-base mb-1",children:[s("profile.orderPrefix")," #",t.orderNumber]}),t.pharmacyName&&e.jsx("p",{className:"text-xs font-semibold text-[#1A8B5E] mb-1",children:t.pharmacyName}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 font-sans",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"})," ",new Date(t.createdAt).toLocaleDateString()]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.itemsCount," ",s("items")]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between md:justify-end w-full md:w-auto gap-4 lg:gap-8",children:[e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"font-sans font-bold text-[#197853]",children:["₼ ",t.totalAmount?.toFixed(2)]})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-sans font-medium border ${v(t.status)}`,children:t.statusText})]})]}),e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/5 transition-colors rounded-xl flex items-center justify-center opacity-0 group-hover:opacity-10 pointer-events-none"})]},t.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(d,{className:"w-8 h-8 text-gray-300"})}),e.jsx("h3",{className:"text-gray-900 font-medium font-sans mb-1",children:s("profile.noOrders")}),e.jsx("p",{className:"text-gray-500 text-sm font-sans",children:s("profile.earnPointsDesc")}),e.jsx("button",{onClick:()=>c("/products"),className:"mt-4 px-6 py-2 bg-[#197853] text-white rounded-lg text-sm font-sans hover:bg-[#0A4A30] transition-colors",children:s("profile.browseProducts")})]})})]})})]})]})]})};export{be as default};
