import{l as N,bh as k,r as g,j as e,a2 as C,y as h,bi as L,bj as S,bk as A,bl as M,Y as w}from"./index-DXStjdCc.js";import{M as j}from"./Modal-it0KzH9o.js";import{C as v}from"./calendar-Csd7mdWw.js";import{L as f}from"./loader-circle-Do0avO8G.js";import{S as E}from"./square-pen-8ph54Pf_.js";import{T as q}from"./trash-2-CQHjR2Pa.js";import{P as U}from"./plus-L2CRyHr_.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],P=N("hash",F);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],D=N("percent",I);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O=N("triangle-alert",T),_=({setOpen:s})=>{const[d,{isLoading:a}]=k(),[t,i]=g.useState({code:"",discountPercentage:"",expirationDate:"",isActive:!0,usageLimit:""}),c=n=>{const{name:o,value:b,type:u,checked:m}=n.target;i(p=>({...p,[o]:u==="checkbox"?m:b}))},r=async n=>{if(n.preventDefault(),!t.code||!t.discountPercentage||!t.expirationDate||!t.usageLimit){h.error("Please fill in all required fields");return}try{const o={...t,discountPercentage:Number(t.discountPercentage),usageLimit:Number(t.usageLimit),expirationDate:new Date(t.expirationDate).toISOString()};await d(o).unwrap(),h.success("Promo code created successfully"),s(!1)}catch(o){h.error(o?.data?.message||"Failed to create promo code")}};return e.jsxs("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-xl w-full",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold !text-white",children:"Create Promo Code"})}),e.jsxs("form",{onSubmit:r,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-gray-400"})," Code *"]}),e.jsx("input",{type:"text",name:"code",value:t.code,onChange:c,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g. SUMMER2026"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400"})," Discount (%) *"]}),e.jsx("input",{type:"number",name:"discountPercentage",value:t.discountPercentage,onChange:c,required:!0,min:"1",max:"100",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-gray-400"})," Usage Limit *"]}),e.jsx("input",{type:"number",name:"usageLimit",value:t.usageLimit,onChange:c,required:!0,min:"1",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g. 100"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400"})," Expiration Date *"]}),e.jsx("input",{type:"datetime-local",name:"expirationDate",value:t.expirationDate,onChange:c,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white scheme-dark"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:t.isActive,onChange:c,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors flex items-center gap-2 disabled:opacity-50",children:[a&&e.jsx(f,{className:"w-4 h-4 animate-spin"}),a?"Creating...":"Create Promo Code"]})]})]})]})},$=({setOpen:s,promoCodeId:d})=>{const{data:a,isLoading:t}=L(d,{skip:!d}),[i,{isLoading:c}]=S(),[r,n]=g.useState({code:"",discountPercentage:0,expirationDate:"",isActive:!0,usageLimit:0});g.useEffect(()=>{a&&n({code:a.code,discountPercentage:a.discountPercentage,expirationDate:a.expirationDate,isActive:a.isActive,usageLimit:a.usageLimit})},[a]);const o=u=>{const{name:m,value:p,type:y,checked:x}=u.target;n(l=>({...l,[m]:y==="checkbox"?x:m==="discountPercentage"||m==="usageLimit"?Number(p):p}))},b=async u=>{u.preventDefault();try{const m={id:d,...r,expirationDate:new Date(r.expirationDate).toISOString()};await i(m).unwrap(),h.success("Promo code updated successfully"),s(!1)}catch(m){h.error(m?.data?.message||"Failed to update promo code")}};return t?e.jsxs("div",{className:"p-10 text-center text-white",children:[e.jsx(f,{className:"animate-spin w-8 h-8 mx-auto"})," Loading..."]}):e.jsxs("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-xl w-full",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold !text-white",children:"Edit Promo Code"})}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-gray-400"})," Code *"]}),e.jsx("input",{type:"text",name:"code",value:r.code,onChange:o,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"e.g. SUMMER2026"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400"})," Discount (%) *"]}),e.jsx("input",{type:"number",name:"discountPercentage",value:r.discountPercentage,onChange:o,required:!0,min:"0",max:"100",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-gray-400"})," Usage Limit *"]}),e.jsx("input",{type:"number",name:"usageLimit",value:r.usageLimit,onChange:o,required:!0,min:"0",className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400"})," Expiration Date *"]}),e.jsx("input",{type:"datetime-local",name:"expirationDate",value:r.expirationDate?new Date(r.expirationDate).toISOString().slice(0,16):"",onChange:o,required:!0,className:"w-full px-3 py-2 bg-[#2c2c2c] border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white scheme-dark"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:r.isActive,onChange:o,className:"w-4 h-4 text-indigo-600 bg-[#2c2c2c] border-gray-600 rounded focus:ring-indigo-500 focus:ring-2"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md font-semibold transition-colors flex items-center gap-2 disabled:opacity-50",children:[c&&e.jsx(f,{className:"w-4 h-4 animate-spin"}),c?"Updating...":"Update Promo Code"]})]})]})]})},z=({onClose:s,onConfirm:d,title:a,message:t,isLoading:i})=>e.jsxs("div",{className:"bg-[#1f1f1f] text-white p-6 rounded-lg max-w-md w-full border border-gray-700 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"bg-red-900/30 p-3 rounded-full border border-red-500/50",children:e.jsx(O,{className:"w-8 h-8 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold !text-white",children:a||"Confirm Delete"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:t||"Are you sure you want to delete this item? This action cannot be undone."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:s,disabled:i,className:"px-5 py-2.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:d,disabled:i,className:"px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-all duration-200 flex items-center gap-2 shadow-lg shadow-red-900/20 disabled:opacity-50",children:[i&&e.jsx(f,{className:"w-4 h-4 animate-spin"}),i?"Deleting...":"Delete Permanently"]})]})]}),R=({promoCode:s,onEdit:d,onDelete:a})=>{const t=new Date(s.expirationDate)<new Date,i=s.usageLimit>0?s.currentUsageCount/s.usageLimit*100:0;return e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 relative group",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl font-bold text-white tracking-wider font-mono",children:s.code}),s.isActive?t?e.jsx("span",{className:"bg-red-900/50 text-red-200 text-xs px-2 py-1 rounded-full border border-red-700",children:"Expired"}):e.jsx("span",{className:"bg-green-900/50 text-green-200 text-xs px-2 py-1 rounded-full border border-green-700",children:"Active"}):e.jsx("span",{className:"bg-gray-700 text-gray-400 text-xs px-2 py-1 rounded-full border border-gray-600",children:"Inactive"})]}),e.jsxs("p",{className:"text-gray-400 text-xs flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),"Expires: ",new Date(s.expirationDate).toLocaleDateString()]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[e.jsx("span",{children:"Usage"}),e.jsxs("span",{children:[s.currentUsageCount," / ",s.usageLimit]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${i>=100?"bg-red-500":"bg-blue-500"}`,style:{width:`${Math.min(i,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t border-gray-700",children:[e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gray-700/30",children:[e.jsx("span",{className:"block text-xs text-gray-400",children:"Discount"}),e.jsxs("span",{className:"text-lg font-semibold text-indigo-300",children:[s.discountPercentage,"%"]})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gray-700/30",children:[e.jsx("span",{className:"block text-xs text-gray-400",children:"Claims"}),e.jsx("span",{className:"text-lg font-semibold text-green-300",children:s.currentUsageCount})]})]})]}),e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>d(s),className:"p-2 bg-blue-600 hover:bg-blue-700 rounded-lg shadow-lg text-white transition-transform transform hover:scale-105",title:"Edit",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(s.id),className:"p-2 bg-red-600 hover:bg-red-700 rounded-lg shadow-lg text-white transition-transform transform hover:scale-105",title:"Delete",children:e.jsx(q,{className:"w-4 h-4"})})]})]})})},V=()=>{const[s,d]=g.useState(1),[a]=g.useState(10),[t,i]=g.useState(null),[c,r]=g.useState(null),{data:n,isLoading:o}=A({pageNumber:s,pageSize:a}),[b,{isLoading:u}]=M(),m=l=>{r(l),i("delete")},p=async()=>{try{await b({id:c}).unwrap(),h.success("Promo code deleted"),x()}catch{h.error("Failed to delete promo code")}},y=l=>{r(l.id),i("edit")},x=()=>{i(null),r(null)};return e.jsxs("div",{className:"p-6 min-h-screen text-white",children:[e.jsx(j,{open:t==="create",setOpen:x,children:e.jsx(_,{setOpen:x})}),e.jsx(j,{open:t==="edit",setOpen:x,children:e.jsx($,{setOpen:x,promoCodeId:c})}),e.jsx(j,{open:t==="delete",setOpen:x,children:e.jsx(z,{onClose:x,onConfirm:p,isLoading:u,title:"Delete Promo Code",message:"Are you sure you want to delete this promo code? This action is permanent and cannot be undone."})}),e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-4xl font-bold !text-white mb-2 flex items-center gap-3",children:[e.jsx(w,{className:"w-10 h-10 text-indigo-500"}),"Promo Codes"]}),e.jsx("p",{className:"text-gray-400",children:"Manage your discount codes and coupons"})]}),e.jsxs("button",{onClick:()=>i("create"),className:"px-6 py-3 bg-white text-gray-900 rounded-lg font-semibold shadow-lg hover:bg-gray-100 transition-all flex items-center gap-2 transform hover:scale-105",children:[e.jsx(U,{className:"w-5 h-5"}),"New Promo Code"]})]}),o?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(f,{className:"w-12 h-12 animate-spin text-indigo-500"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-[60vh]",children:e.jsx("div",{className:"grid  grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n?.items?.map(l=>e.jsx(R,{promoCode:l,onEdit:y,onDelete:m},l.id))})}),n?.items?.length===0&&e.jsxs("div",{className:"text-center py-20 bg-gray-800/50 rounded-xl border border-gray-700 mt-6",children:[e.jsx(w,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold !text-white mb-2",children:"No Promo Codes Found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first promo code to get started."}),e.jsx("button",{onClick:()=>i("create"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition",children:"Create Promo Code"})]}),n?.items?.length>0&&e.jsxs("div",{className:"flex justify-center mt-10 gap-2",children:[e.jsx("button",{disabled:!n.hasPreviousPage,onClick:()=>d(l=>l-1),className:"px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-400",children:["Page ",n.page," of ",n.totalPages]}),e.jsx("button",{disabled:!n.hasNextPage,onClick:()=>d(l=>l+1),className:"px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})};export{V as default};
